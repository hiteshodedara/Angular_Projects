/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
import { Component, HostBinding, Input } from '@angular/core';
import { convertToBoolProperty } from '../helpers';
import * as i0 from "@angular/core";
import * as i1 from "@angular/platform-browser";
import * as i2 from "@angular/common";
import * as i3 from "../badge/badge.component";
/**
 * Represents a component showing a user avatar (picture) with a user name on the right.
 * @stacked-example(Showcase, user/user-showcase.component)
 *
 * ```ts
 *   <nb-user name="John Doe" title="Engineer"></nb-user>
 * ```
 *
 * ### Installation
 *
 * Import `NbUserModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbUserModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * Available in multiple sizes:
 * @stacked-example(Multiple Sizes, user/user-sizes.component)
 *
 *
 * You can hide unnecessary captions (name, title or both):
 * @stacked-example(Hide captions in user component, user/user-hide-captions.component)
 *
 *
 * You can set custom avatar background-color, user image (as link or BASE64 string) and disable user initials:
 * @stacked-example(Avatar image settings, user/user-avatar-settings.component)
 *
 * Component shape could be controlled with `shape` input.
 * @stacked-example(Shapes, user/user-shape.component)
 *
 * @styles
 *
 * user-picture-box-background-color:
 * user-picture-box-border-color:
 * user-picture-box-border-width:
 * user-initials-text-color:
 * user-initials-text-font-family:
 * user-initials-text-font-weight:
 * user-name-text-color:
 * user-name-text-font-family:
 * user-name-text-font-weight:
 * user-title-text-color:
 * user-title-text-font-family:
 * user-title-text-font-weight:
 * user-rectangle-border-radius:
 * user-semi-round-border-radius:
 * user-round-border-radius:
 * user-tiny-height:
 * user-tiny-width:
 * user-tiny-initials-text-font-size:
 * user-tiny-initials-text-line-height:
 * user-tiny-name-text-font-size:
 * user-tiny-name-text-line-height:
 * user-tiny-title-text-font-size:
 * user-tiny-title-text-line-height:
 * user-small-height:
 * user-small-width:
 * user-small-initials-text-font-size:
 * user-small-initials-text-line-height:
 * user-small-name-text-font-size:
 * user-small-name-text-line-height:
 * user-small-title-text-font-size:
 * user-small-title-text-line-height:
 * user-medium-height:
 * user-medium-width:
 * user-medium-initials-text-font-size:
 * user-medium-initials-text-line-height:
 * user-medium-name-text-font-size:
 * user-medium-name-text-line-height:
 * user-medium-title-text-font-size:
 * user-medium-title-text-line-height:
 * user-large-height:
 * user-large-width:
 * user-large-initials-text-font-size:
 * user-large-initials-text-line-height:
 * user-large-name-text-font-size:
 * user-large-name-text-line-height:
 * user-large-title-text-font-size:
 * user-large-title-text-line-height:
 * user-giant-height:
 * user-giant-width:
 * user-giant-initials-text-font-size:
 * user-giant-initials-text-line-height:
 * user-giant-name-text-font-size:
 * user-giant-name-text-line-height:
 * user-giant-title-text-font-size:
 * user-giant-title-text-line-height:
 */
export class NbUserComponent {
    /**
     * Absolute path to a user picture or base64 image.
     * User name initials will be shown if no picture specified (JD for John Doe).
     * @type string
     */
    set picture(value) {
        this.imageBackgroundStyle = value ? this.domSanitizer.bypassSecurityTrustStyle(`url(${value})`) : null;
    }
    /**
     * Whether to show a user name or not
     */
    get showName() {
        return this._showName;
    }
    set showName(val) {
        this._showName = convertToBoolProperty(val);
    }
    /**
     * Whether to show a user title or not
     * @type boolean
     */
    get showTitle() {
        return this._showTitle;
    }
    set showTitle(val) {
        this._showTitle = convertToBoolProperty(val);
    }
    /**
     * Whether to show a user initials (if no picture specified) or not
     * @type boolean
     */
    get showInitials() {
        return this._showInitials;
    }
    set showInitials(val) {
        this._showInitials = convertToBoolProperty(val);
    }
    /**
     * Whether to show only a picture or also show the name and title
     * @type boolean
     */
    get onlyPicture() {
        return !this.showName && !this.showTitle;
    }
    set onlyPicture(val) {
        this.showName = this.showTitle = !convertToBoolProperty(val);
    }
    get tiny() {
        return this.size === 'tiny';
    }
    get small() {
        return this.size === 'small';
    }
    get medium() {
        return this.size === 'medium';
    }
    get large() {
        return this.size === 'large';
    }
    get giant() {
        return this.size === 'giant';
    }
    get rectangle() {
        return this.shape === 'rectangle';
    }
    get semiRound() {
        return this.shape === 'semi-round';
    }
    get round() {
        return this.shape === 'round';
    }
    constructor(domSanitizer) {
        this.domSanitizer = domSanitizer;
        /**
         * Specifies a name to be shown on the right of a user picture
         * @type string
         */
        this.name = 'Anonymous';
        /**
         * Size of the component.
         * Possible values: `tiny`, `small`, `medium` (default), `large`, 'giant'.
         */
        this.size = 'medium';
        /**
         * Shape of the picture box.
         * Possible values: `rectangle`, `semi-round`, `round`.
         */
        this.shape = 'round';
        this._showName = true;
        this._showTitle = true;
        this._showInitials = true;
        /**
         * Badge status (adds specific styles):
         * `primary`, `info`, `success`, `warning`, `danger`
         * @param {string} val
         */
        this.badgeStatus = 'basic';
    }
    getInitials() {
        if (this.name) {
            const names = this.name.split(' ');
            return names.map(n => n.charAt(0)).splice(0, 2).join('').toUpperCase();
        }
        return '';
    }
}
NbUserComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.4", ngImport: i0, type: NbUserComponent, deps: [{ token: i1.DomSanitizer }], target: i0.ɵɵFactoryTarget.Component });
NbUserComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.4", type: NbUserComponent, selector: "nb-user", inputs: { name: "name", title: "title", picture: "picture", color: "color", size: "size", shape: "shape", showName: "showName", showTitle: "showTitle", showInitials: "showInitials", onlyPicture: "onlyPicture", badgeText: "badgeText", badgeStatus: "badgeStatus", badgePosition: "badgePosition" }, host: { properties: { "class.size-tiny": "this.tiny", "class.size-small": "this.small", "class.size-medium": "this.medium", "class.size-large": "this.large", "class.size-giant": "this.giant", "class.shape-rectangle": "this.rectangle", "class.shape-semi-round": "this.semiRound", "class.shape-round": "this.round" } }, ngImport: i0, template: "<div class=\"user-container\">\n  <div *ngIf=\"imageBackgroundStyle\" class=\"user-picture image\" [style.background-image]=\"imageBackgroundStyle\">\n    <nb-badge *ngIf=\"badgeText\" [text]=\"badgeText\" [status]=\"badgeStatus\" [position]=\"badgePosition\"></nb-badge>\n  </div>\n  <div *ngIf=\"!imageBackgroundStyle\" class=\"user-picture initials\" [style.background-color]=\"color\">\n    <ng-container *ngIf=\"showInitials\">\n      {{ getInitials() }}\n    </ng-container>\n    <nb-badge *ngIf=\"badgeText\" [text]=\"badgeText\" [status]=\"badgeStatus\" [position]=\"badgePosition\"></nb-badge>\n  </div>\n\n  <div class=\"info-container\">\n    <div *ngIf=\"showName && name\" class=\"user-name\">{{ name }}</div>\n    <div *ngIf=\"showTitle && title\" class=\"user-title\">{{ title }}</div>\n  </div>\n</div>\n", styles: ["/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */:host{display:flex}:host .user-container{position:relative;display:flex;align-items:center}:host .user-picture{position:relative;flex-shrink:0}:host .user-picture.image{background-size:cover;background-repeat:no-repeat}:host .user-picture.initials{display:flex;align-items:center;justify-content:center}[dir=rtl] :host .user-name,[dir=rtl] :host .user-title{text-align:right}[dir=ltr] :host .info-container{margin-left:.5rem}[dir=rtl] :host .info-container{margin-right:.5rem}\n"], dependencies: [{ kind: "directive", type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i3.NbBadgeComponent, selector: "nb-badge", inputs: ["text", "position", "dotMode", "status"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.4", ngImport: i0, type: NbUserComponent, decorators: [{
            type: Component,
            args: [{ selector: 'nb-user', template: "<div class=\"user-container\">\n  <div *ngIf=\"imageBackgroundStyle\" class=\"user-picture image\" [style.background-image]=\"imageBackgroundStyle\">\n    <nb-badge *ngIf=\"badgeText\" [text]=\"badgeText\" [status]=\"badgeStatus\" [position]=\"badgePosition\"></nb-badge>\n  </div>\n  <div *ngIf=\"!imageBackgroundStyle\" class=\"user-picture initials\" [style.background-color]=\"color\">\n    <ng-container *ngIf=\"showInitials\">\n      {{ getInitials() }}\n    </ng-container>\n    <nb-badge *ngIf=\"badgeText\" [text]=\"badgeText\" [status]=\"badgeStatus\" [position]=\"badgePosition\"></nb-badge>\n  </div>\n\n  <div class=\"info-container\">\n    <div *ngIf=\"showName && name\" class=\"user-name\">{{ name }}</div>\n    <div *ngIf=\"showTitle && title\" class=\"user-title\">{{ title }}</div>\n  </div>\n</div>\n", styles: ["/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */:host{display:flex}:host .user-container{position:relative;display:flex;align-items:center}:host .user-picture{position:relative;flex-shrink:0}:host .user-picture.image{background-size:cover;background-repeat:no-repeat}:host .user-picture.initials{display:flex;align-items:center;justify-content:center}[dir=rtl] :host .user-name,[dir=rtl] :host .user-title{text-align:right}[dir=ltr] :host .info-container{margin-left:.5rem}[dir=rtl] :host .info-container{margin-right:.5rem}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.DomSanitizer }]; }, propDecorators: { name: [{
                type: Input
            }], title: [{
                type: Input
            }], picture: [{
                type: Input
            }], color: [{
                type: Input
            }], size: [{
                type: Input
            }], shape: [{
                type: Input
            }], showName: [{
                type: Input
            }], showTitle: [{
                type: Input
            }], showInitials: [{
                type: Input
            }], onlyPicture: [{
                type: Input
            }], badgeText: [{
                type: Input
            }], badgeStatus: [{
                type: Input
            }], badgePosition: [{
                type: Input
            }], tiny: [{
                type: HostBinding,
                args: ['class.size-tiny']
            }], small: [{
                type: HostBinding,
                args: ['class.size-small']
            }], medium: [{
                type: HostBinding,
                args: ['class.size-medium']
            }], large: [{
                type: HostBinding,
                args: ['class.size-large']
            }], giant: [{
                type: HostBinding,
                args: ['class.size-giant']
            }], rectangle: [{
                type: HostBinding,
                args: ['class.shape-rectangle']
            }], semiRound: [{
                type: HostBinding,
                args: ['class.shape-semi-round']
            }], round: [{
                type: HostBinding,
                args: ['class.shape-round']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL3RoZW1lL2NvbXBvbmVudHMvdXNlci91c2VyLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3NyYy9mcmFtZXdvcmsvdGhlbWUvY29tcG9uZW50cy91c2VyL3VzZXIuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRztBQUVILE9BQU8sRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLEtBQUssRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUc5RCxPQUFPLEVBQUUscUJBQXFCLEVBQWtCLE1BQU0sWUFBWSxDQUFDOzs7OztBQU1uRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBNkZHO0FBTUgsTUFBTSxPQUFPLGVBQWU7SUFnQjFCOzs7O09BSUc7SUFDSCxJQUNJLE9BQU8sQ0FBQyxLQUFhO1FBQ3ZCLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsd0JBQXdCLENBQUMsT0FBTyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7SUFDekcsQ0FBQztJQW9CRDs7T0FFRztJQUNILElBQ0ksUUFBUTtRQUNWLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztJQUN4QixDQUFDO0lBQ0QsSUFBSSxRQUFRLENBQUMsR0FBWTtRQUN2QixJQUFJLENBQUMsU0FBUyxHQUFHLHFCQUFxQixDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzlDLENBQUM7SUFJRDs7O09BR0c7SUFDSCxJQUNJLFNBQVM7UUFDWCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDekIsQ0FBQztJQUNELElBQUksU0FBUyxDQUFD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Z0JBZUYsU0FBUztzQkFEWixLQUFLO2dCQWVGLFlBQVk7c0JBRGYsS0FBSztnQkFlRixXQUFXO3NCQURkLEtBQUs7Z0JBYUcsU0FBUztzQkFBakIsS0FBSztnQkFPRyxXQUFXO3NCQUFuQixLQUFLO2dCQVNHLGFBQWE7c0JBQXJCLEtBQUs7Z0JBR0YsSUFBSTtzQkFEUCxXQUFXO3VCQUFDLGlCQUFpQjtnQkFNMUIsS0FBSztzQkFEUixXQUFXO3VCQUFDLGtCQUFrQjtnQkFNM0IsTUFBTTtzQkFEVCxXQUFXO3VCQUFDLG1CQUFtQjtnQkFNNUIsS0FBSztzQkFEUixXQUFXO3VCQUFDLGtCQUFrQjtnQkFNM0IsS0FBSztzQkFEUixXQUFXO3VCQUFDLGtCQUFrQjtnQkFNM0IsU0FBUztzQkFEWixXQUFXO3VCQUFDLHVCQUF1QjtnQkFNaEMsU0FBUztzQkFEWixXQUFXO3VCQUFDLHdCQUF3QjtnQkFNakMsS0FBSztzQkFEUixXQUFXO3VCQUFDLG1CQUFtQiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50LCBIb3N0QmluZGluZywgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IERvbVNhbml0aXplciwgU2FmZVN0eWxlIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlcic7XG5cbmltcG9ydCB7IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSwgTmJCb29sZWFuSW5wdXQgfSBmcm9tICcuLi9oZWxwZXJzJztcbmltcG9ydCB7IE5iQ29tcG9uZW50U2l6ZSB9IGZyb20gJy4uL2NvbXBvbmVudC1zaXplJztcbmltcG9ydCB7IE5iQ29tcG9uZW50U2hhcGUgfSBmcm9tICcuLi9jb21wb25lbnQtc2hhcGUnO1xuaW1wb3J0IHsgTmJDb21wb25lbnRPckN1c3RvbVN0YXR1cyB9IGZyb20gJy4uL2NvbXBvbmVudC1zdGF0dXMnO1xuaW1wb3J0IHsgTmJCYWRnZVBvc2l0aW9uIH0gZnJvbSAnLi4vYmFkZ2UvYmFkZ2UuY29tcG9uZW50JztcblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY29tcG9uZW50IHNob3dpbmcgYSB1c2VyIGF2YXRhciAocGljdHVyZSkgd2l0aCBhIHVzZXIgbmFtZSBvbiB0aGUgcmlnaHQuXG4gKiBAc3RhY2tlZC1leGFtcGxlKFNob3djYXNlLCB1c2VyL3VzZXItc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIGBgYHRzXG4gKiAgIDxuYi11c2VyIG5hbWU9XCJKb2huIERvZVwiIHRpdGxlPVwiRW5naW5lZXJcIj48L25iLXVzZXI+XG4gKiBgYGBcbiAqXG4gKiAjIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogSW1wb3J0IGBOYlVzZXJNb2R1bGVgIHRvIHlvdXIgZmVhdHVyZSBtb2R1bGUuXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iVXNlck1vZHVsZSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgUGFnZU1vZHVsZSB7IH1cbiAqIGBgYFxuICogIyMjIFVzYWdlXG4gKlxuICogQXZhaWxhYmxlIGluIG11bHRpcGxlIHNpemVzOlxuICogQHN0YWNrZWQtZXhhbXBsZShNdWx0aXBsZSBTaXplcywgdXNlci91c2VyLXNpemVzLmNvbXBvbmVudClcbiAqXG4gKlxuICogWW91IGNhbiBoaWRlIHVubmVjZXNzYXJ5IGNhcHRpb25zIChuYW1lLCB0aXRsZSBvciBib3RoKTpcbiAqIEBzdGFja2VkLWV4YW1wbGUoSGlkZSBjYXB0aW9ucyBpbiB1c2VyIGNvbXBvbmVudCwgdXNlci91c2VyLWhpZGUtY2FwdGlvbnMuY29tcG9uZW50KVxuICpcbiAqXG4gKiBZb3UgY2FuIHNldCBjdXN0b20gYXZhdGFyIGJhY2tncm91bmQtY29sb3IsIHVzZXIgaW1hZ2UgKGFzIGxpbmsgb3IgQkFTRTY0IHN0cmluZykgYW5kIGRpc2FibGUgdXNlciBpbml0aWFsczpcbiAqIEBzdGFja2VkLWV4YW1wbGUoQXZhdGFyIGltYWdlIHNldHRpbmdzLCB1c2VyL3VzZXItYXZhdGFyLXNldHRpbmdzLmNvbXBvbmVudClcbiAqXG4gKiBDb21wb25lbnQgc2hhcGUgY291bGQgYmUgY29udHJvbGxlZCB3aXRoIGBzaGFwZWAgaW5wdXQuXG4gKiBAc3RhY2tlZC1leGFtcGxlKFNoYXBlcywgdXNlci91c2VyLXNoYXBlLmNvbXBvbmVudClcbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogdXNlci1waWN0dXJlLWJveC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdXNlci1waWN0dXJlLWJveC1ib3JkZXItY29sb3I6XG4gKiB1c2VyLXBpY3R1cmUtYm94LWJvcmRlci13aWR0aDpcbiAqIHVzZXItaW5pdGlhbHMtdGV4dC1jb2xvcjpcbiAqIHVzZXItaW5pdGlhbHMtdGV4dC1mb250LWZhbWlseTpcbiAqIHVzZXItaW5pdGlhbHMtdGV4dC1mb250LXdlaWdodDpcbiAqIHVzZXItbmFtZS10ZXh0LWNvbG9yOlxuICogdXNlci1uYW1lLXRleHQtZm9udC1mYW1pbHk6XG4gKiB1c2VyLW5hbWUtdGV4dC1mb250LXdlaWdodDpcbiAqIHVzZXItdGl0bGUtdGV4dC1jb2xvcjpcbiAqIHVzZXItdGl0bGUtdGV4dC1mb250LWZhbWlseTpcbiAqIHVzZXItdGl0bGUtdGV4dC1mb250LXdlaWdodDpcbiAqIHVzZXItcmVjdGFuZ2xlLWJvcmRlci1yYWRpdXM6XG4gKiB1c2VyLXNlbWktcm91bmQtYm9yZGVyLXJhZGl1czpcbiAqIHVzZXItcm91bmQtYm9yZGVyLXJhZGl1czpcbiAqIHVzZXItdGlueS1oZWlnaHQ6XG4gKiB1c2VyLXRpbnktd2lkdGg6XG4gKiB1c2VyLXRpbnktaW5pdGlhbHMtdGV4dC1mb250LXNpemU6XG4gKiB1c2VyLXRpbnktaW5pdGlhbHMtdGV4dC1saW5lLWhlaWdodDpcbiAqIHVzZXItdGlueS1uYW1lLXRleHQtZm9udC1zaXplOlxuICogdXNlci10aW55LW5hbWUtdGV4dC1saW5lLWhlaWdodDpcbiAqIHVzZXItdGlueS10aXRsZS10ZXh0LWZvbnQtc2l6ZTpcbiAqIHVzZXItdGlueS10aXRsZS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogdXNlci1zbWFsbC1oZWlnaHQ6XG4gKiB1c2VyLXNtYWxsLXdpZHRoOlxuICogdXNlci1zbWFsbC1pbml0aWFscy10ZXh0LWZvbnQtc2l6ZTpcbiAqIHVzZXItc21hbGwtaW5pdGlhbHMtdGV4dC1saW5lLWhlaWdodDpcbiAqIHVzZXItc21hbGwtbmFtZS10ZXh0LWZvbnQtc2l6ZTpcbiAqIHVzZXItc21hbGwtbmFtZS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogdXNlci1zbWFsbC10aXRsZS10ZXh0LWZvbnQtc2l6ZTpcbiAqIHVzZXItc21hbGwtdGl0bGUtdGV4dC1saW5lLWhlaWdodDpcbiAqIHVzZXItbWVkaXVtLWhlaWdodDpcbiAqIHVzZXItbWVkaXVtLXdpZHRoOlxuICogdXNlci1tZWRpdW0taW5pdGlhbHMtdGV4dC1mb250LXNpemU6XG4gKiB1c2VyLW1lZGl1bS1pbml0aWFscy10ZXh0LWxpbmUtaGVpZ2h0OlxuICogdXNlci1tZWRpdW0tbmFtZS10ZXh0LWZvbnQtc2l6ZTpcbiAqIHVzZXItbWVkaXVtLW5hbWUtdGV4dC1saW5lLWhlaWdodDpcbiAqIHVzZXItbWVkaXVtLXRpdGxlLXRleHQtZm9udC1zaXplOlxuICogdXNlci1tZWRpdW0tdGl0bGUtdGV4dC1saW5lLWhlaWdodDpcbiAqIHVzZXItbGFyZ2UtaGVpZ2h0OlxuICogdXNlci1sYXJnZS13aWR0aDpcbiAqIHVzZXItbGFyZ2UtaW5pdGlhbHMtdGV4dC1mb250LXNpemU6XG4gKiB1c2VyLWxhcmdlLWluaXRpYWxzLXRleHQtbGluZS1oZWlnaHQ6XG4gKiB1c2VyLWxhcmdlLW5hbWUtdGV4dC1mb250LXNpemU6XG4gKiB1c2VyLWxhcmdlLW5hbWUtdGV4dC1saW5lLWhlaWdodDpcbiAqIHVzZXItbGFyZ2UtdGl0bGUtdGV4dC1mb250LXNpemU6XG4gKiB1c2VyLWxhcmdlLXRpdGxlLXRleHQtbGluZS1oZWlnaHQ6XG4gKiB1c2VyLWdpYW50LWhlaWdodDpcbiAqIHVzZXItZ2lhbnQtd2lkdGg6XG4gKiB1c2VyLWdpYW50LWluaXRpYWxzLXRleHQtZm9udC1zaXplOlxuICogdXNlci1naWFudC1pbml0aWFscy10ZXh0LWxpbmUtaGVpZ2h0OlxuICogdXNlci1naWFudC1uYW1lLXRleHQtZm9udC1zaXplOlxuICogdXNlci1naWFudC1uYW1lLXRleHQtbGluZS1oZWlnaHQ6XG4gKiB1c2VyLWdpYW50LXRpdGxlLXRleHQtZm9udC1zaXplOlxuICogdXNlci1naWFudC10aXRsZS10ZXh0LWxpbmUtaGVpZ2h0OlxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICduYi11c2VyJyxcbiAgc3R5bGVVcmxzOiBbJy4vdXNlci5jb21wb25lbnQuc2NzcyddLFxuICB0ZW1wbGF0ZVVybDogJy4vdXNlci5jb21wb25lbnQuaHRtbCcsXG59KVxuZXhwb3J0IGNsYXNzIE5iVXNlckNvbXBvbmVudCB7XG5cbiAgaW1hZ2VCYWNrZ3JvdW5kU3R5bGU6IFNhZmVTdHlsZTtcblxuICAvKipcbiAgICogU3BlY2lmaWVzIGEgbmFtZSB0byBiZSBzaG93biBvbiB0aGUgcmlnaHQgb2YgYSB1c2VyIHBpY3R1cmVcbiAgICogQHR5cGUgc3RyaW5nXG4gICAqL1xuICBASW5wdXQoKSBuYW1lOiBzdHJpbmcgPSAnQW5vbnltb3VzJztcblxuICAvKipcbiAgICogU3BlY2lmaWVzIGEgdGl0bGUgdG8gYmUgc2hvd24gdW5kZXIgdGhlICoqbmFtZSoqXG4gICAqIEB0eXBlIHN0cmluZ1xuICAgKi9cbiAgQElucHV0KCkgdGl0bGU6IHN0cmluZztcblxuICAvKipcbiAgICogQWJzb2x1dGUgcGF0aCB0byBhIHVzZXIgcGljdHVyZSBvciBiYXNlNjQgaW1hZ2UuXG4gICAqIFVzZXIgbmFtZSBpbml0aWFscyB3aWxsIGJlIHNob3duIGlmIG5vIHBpY3R1cmUgc3BlY2lmaWVkIChKRCBmb3IgSm9obiBEb2UpLlxuICAgKiBAdHlwZSBzdHJpbmdcbiAgICovXG4gIEBJbnB1dCgpXG4gIHNldCBwaWN0dXJlKHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLmltYWdlQmFja2dyb3VuZFN0eWxlID0gdmFsdWUgPyB0aGlzLmRvbVNhbml0aXplci5ieXBhc3NTZWN1cml0eVRydXN0U3R5bGUoYHVybCgke3ZhbHVlfSlgKSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQ29sb3Igb2YgdGhlIGFyZWEgc2hvd24gd2hlbiBubyBwaWN0dXJlIHNwZWNpZmllZFxuICAgKiBAdHlwZSBzdHJpbmdcbiAgICovXG4gIEBJbnB1dCgpIGNvbG9yOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFNpemUgb2YgdGhlIGNvbXBvbmVudC5cbiAgICogUG9zc2libGUgdmFsdWVzOiBgdGlueWAsIGBzbWFsbGAsIGBtZWRpdW1gIChkZWZhdWx0KSwgYGxhcmdlYCwgJ2dpYW50Jy5cbiAgICovXG4gIEBJbnB1dCgpIHNpemU6IE5iQ29tcG9uZW50U2l6ZSA9ICdtZWRpdW0nO1xuXG4gIC8qKlxuICAgKiBTaGFwZSBvZiB0aGUgcGljdHVyZSBib3guXG4gICAqIFBvc3NpYmxlIHZhbHVlczogYHJlY3RhbmdsZWAsIGBzZW1pLXJvdW5kYCwgYHJvdW5kYC5cbiAgICovXG4gIEBJbnB1dCgpIHNoYXBlOiBOYkNvbXBvbmVudFNoYXBlID0gJ3JvdW5kJztcblxuICAvKipcbiAgICogV2hldGhlciB0byBzaG93IGEgdXNlciBuYW1lIG9yIG5vdFxuICAgKi9cbiAgQElucHV0KClcbiAgZ2V0IHNob3dOYW1lKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9zaG93TmFtZTtcbiAgfVxuICBzZXQgc2hvd05hbWUodmFsOiBib29sZWFuKSB7XG4gICAgdGhpcy5fc2hvd05hbWUgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsKTtcbiAgfVxuICBwcml2YXRlIF9zaG93TmFtZTogYm9vbGVhbiA9IHRydWU7XG4gIHN0YXRpYyBuZ0FjY2VwdElucHV0VHlwZV9zaG93TmFtZTogTmJCb29sZWFuSW5wdXQ7XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gc2hvdyBhIHVzZXIgdGl0bGUgb3Igbm90XG4gICAqIEB0eXBlIGJvb2xlYW5cbiAgICovXG4gIEBJbnB1dCgpXG4gIGdldCBzaG93VGl0bGUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX3Nob3dUaXRsZTtcbiAgfVxuICBzZXQgc2hvd1RpdGxlKHZhbDogYm9vbGVhbikge1xuICAgIHRoaXMuX3Nob3dUaXRsZSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWwpO1xuICB9XG4gIHByaXZhdGUgX3Nob3dUaXRsZTogYm9vbGVhbiA9IHRydWU7XG4gIHN0YXRpYyBuZ0FjY2VwdElucHV0VHlwZV9zaG93VGl0bGU6IE5iQm9vbGVhbklucHV0O1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHNob3cgYSB1c2VyIGluaXRpYWxzIChpZiBubyBwaWN0dXJlIHNwZWNpZmllZCkgb3Igbm90XG4gICAqIEB0eXBlIGJvb2xlYW5cbiAgICovXG4gIEBJbnB1dCgpXG4gIGdldCBzaG93SW5pdGlhbHMoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX3Nob3dJbml0aWFscztcbiAgfVxuICBzZXQgc2hvd0luaXRpYWxzKHZhbDogYm9vbGVhbikge1xuICAgIHRoaXMuX3Nob3dJbml0aWFscyA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWwpO1xuICB9XG4gIHByaXZhdGUgX3Nob3dJbml0aWFsczogYm9vbGVhbiA9IHRydWU7XG4gIHN0YXRpYyBuZ0FjY2VwdElucHV0VHlwZV9zaG93SW5pdGlhbHM6IE5iQm9vbGVhbklucHV0O1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHNob3cgb25seSBhIHBpY3R1cmUgb3IgYWxzbyBzaG93IHRoZSBuYW1lIGFuZCB0aXRsZVxuICAgKiBAdHlwZSBib29sZWFuXG4gICAqL1xuICBASW5wdXQoKVxuICBnZXQgb25seVBpY3R1cmUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICF0aGlzLnNob3dOYW1lICYmICF0aGlzLnNob3dUaXRsZTtcbiAgfVxuICBzZXQgb25seVBpY3R1cmUodmFsOiBib29sZWFuKSB7XG4gICAgdGhpcy5zaG93TmFtZSA9IHRoaXMuc2hvd1RpdGxlID0gIWNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWwpO1xuICB9XG4gIHN0YXRpYyBuZ0FjY2VwdElucHV0VHlwZV9vbmx5UGljdHVyZTogTmJCb29sZWFuSW5wdXQ7XG5cbiAgLyoqXG4gICAqIEJhZGdlIHRleHQgdG8gZGlzcGxheVxuICAgKiBAdHlwZSBzdHJpbmdcbiAgICovXG4gIEBJbnB1dCgpIGJhZGdlVGV4dDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBCYWRnZSBzdGF0dXMgKGFkZHMgc3BlY2lmaWMgc3R5bGVzKTpcbiAgICogYHByaW1hcnlgLCBgaW5mb2AsIGBzdWNjZXNzYCwgYHdhcm5pbmdgLCBgZGFuZ2VyYFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsXG4gICAqL1xuICBASW5wdXQoKSBiYWRnZVN0YXR1czogTmJDb21wb25lbnRPckN1c3RvbVN0YXR1cyA9ICdiYXNpYyc7XG5cbiAgLyoqXG4gICAqIEJhZGdlIHBvc2l0aW9uLlxuICAgKiBDYW4gYmUgc2V0IHRvIGFueSBjbGFzcyBvciB0byBvbmUgb2YgcHJlZGVmaW5lZCBwb3NpdGlvbnM6XG4gICAqICd0b3AgbGVmdCcsICd0b3AgcmlnaHQnLCAnYm90dG9tIGxlZnQnLCAnYm90dG9tIHJpZ2h0JyxcbiAgICogJ3RvcCBzdGFydCcsICd0b3AgZW5kJywgJ2JvdHRvbSBzdGFydCcsICdib3R0b20gZW5kJ1xuICAgKiBAdHlwZSBzdHJpbmdcbiAgICovXG4gIEBJbnB1dCgpIGJhZGdlUG9zaXRpb246IE5iQmFkZ2VQb3NpdGlvbjtcblxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtdGlueScpXG4gIGdldCB0aW55KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnNpemUgPT09ICd0aW55JztcbiAgfVxuXG4gIEBIb3N0QmluZGluZygnY2xhc3Muc2l6ZS1zbWFsbCcpXG4gIGdldCBzbWFsbCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5zaXplID09PSAnc21hbGwnO1xuICB9XG5cbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLW1lZGl1bScpXG4gIGdldCBtZWRpdW0oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ21lZGl1bSc7XG4gIH1cblxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtbGFyZ2UnKVxuICBnZXQgbGFyZ2UoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ2xhcmdlJztcbiAgfVxuXG4gIEBIb3N0QmluZGluZygnY2xhc3Muc2l6ZS1naWFudCcpXG4gIGdldCBnaWFudCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5zaXplID09PSAnZ2lhbnQnO1xuICB9XG5cbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5zaGFwZS1yZWN0YW5nbGUnKVxuICBnZXQgcmVjdGFuZ2xlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnNoYXBlID09PSAncmVjdGFuZ2xlJztcbiAgfVxuXG4gIEBIb3N0QmluZGluZygnY2xhc3Muc2hhcGUtc2VtaS1yb3VuZCcpXG4gIGdldCBzZW1pUm91bmQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuc2hhcGUgPT09ICdzZW1pLXJvdW5kJztcbiAgfVxuXG4gIEBIb3N0QmluZGluZygnY2xhc3Muc2hhcGUtcm91bmQnKVxuICBnZXQgcm91bmQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuc2hhcGUgPT09ICdyb3VuZCc7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGRvbVNhbml0aXplcjogRG9tU2FuaXRpemVyKSB7IH1cblxuICBnZXRJbml0aWFscygpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLm5hbWUpIHtcbiAgICAgIGNvbnN0IG5hbWVzID0gdGhpcy5uYW1lLnNwbGl0KCcgJyk7XG5cbiAgICAgIHJldHVybiBuYW1lcy5tYXAobiA9PiBuLmNoYXJBdCgwKSkuc3BsaWNlKDAsIDIpLmpvaW4oJycpLnRvVXBwZXJDYXNlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuICcnO1xuICB9XG59XG4iLCI8ZGl2IGNsYXNzPVwidXNlci1jb250YWluZXJcIj5cbiAgPGRpdiAqbmdJZj1cImltYWdlQmFja2dyb3VuZFN0eWxlXCIgY2xhc3M9XCJ1c2VyLXBpY3R1cmUgaW1hZ2VcIiBbc3R5bGUuYmFja2dyb3VuZC1pbWFnZV09XCJpbWFnZUJhY2tncm91bmRTdHlsZVwiPlxuICAgIDxuYi1iYWRnZSAqbmdJZj1cImJhZGdlVGV4dFwiIFt0ZXh0XT1cImJhZGdlVGV4dFwiIFtzdGF0dXNdPVwiYmFkZ2VTdGF0dXNcIiBbcG9zaXRpb25dPVwiYmFkZ2VQb3NpdGlvblwiPjwvbmItYmFkZ2U+XG4gIDwvZGl2PlxuICA8ZGl2ICpuZ0lmPVwiIWltYWdlQmFja2dyb3VuZFN0eWxlXCIgY2xhc3M9XCJ1c2VyLXBpY3R1cmUgaW5pdGlhbHNcIiBbc3R5bGUuYmFja2dyb3VuZC1jb2xvcl09XCJjb2xvclwiPlxuICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJzaG93SW5pdGlhbHNcIj5cbiAgICAgIHt7IGdldEluaXRpYWxzKCkgfX1cbiAgICA8L25nLWNvbnRhaW5lcj5cbiAgICA8bmItYmFkZ2UgKm5nSWY9XCJiYWRnZVRleHRcIiBbdGV4dF09XCJiYWRnZVRleHRcIiBbc3RhdHVzXT1cImJhZGdlU3RhdHVzXCIgW3Bvc2l0aW9uXT1cImJhZGdlUG9zaXRpb25cIj48L25iLWJhZGdlPlxuICA8L2Rpdj5cblxuICA8ZGl2IGNsYXNzPVwiaW5mby1jb250YWluZXJcIj5cbiAgICA8ZGl2ICpuZ0lmPVwic2hvd05hbWUgJiYgbmFtZVwiIGNsYXNzPVwidXNlci1uYW1lXCI+e3sgbmFtZSB9fTwvZGl2PlxuICAgIDxkaXYgKm5nSWY9XCJzaG93VGl0bGUgJiYgdGl0bGVcIiBjbGFzcz1cInVzZXItdGl0bGVcIj57eyB0aXRsZSB9fTwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PlxuIl19