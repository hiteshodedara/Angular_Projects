/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
import { Directive, Input, HostBinding, } from '@angular/core';
import { NbSpinnerComponent } from './spinner.component';
import * as i0 from "@angular/core";
/**
 * Styled spinner directive
 *
 * @stacked-example(Spinner Showcase, spinner/spinner-card.component)
 *
 *
 * ```ts
 * <nb-card [nbSpinner]="loading" nbSpinnerStatus="danger">
 *   <nb-card-body>Card Content</nb-card-body>
 * </nb-card>
 * ```
 *
 * ### Installation
 *
 * Import `NbSpinnerModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbSpinnerModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * Could be colored using `status` property
 *
 * @stacked-example(Spinner Colors, spinner/spinner-colors.component)
 *
 * Available in different sizes with `size` property:
 *
 * @stacked-example(Spinner Sizes, spinner/spinner-sizes.component)
 *
 * It is also possible to place it into the button:
 * @stacked-example(Buttons with spinner, spinner/spinner-button.component)
 *
 * Or tabs:
 * @stacked-example(Spinner in tabs, spinner/spinner-tabs.component)
 */
export class NbSpinnerDirective {
    /**
     * Directive value - show or hide spinner
     * @param {boolean} val
     */
    set nbSpinner(val) {
        if (this.componentFactory) {
            if (val) {
                this.show();
            }
            else {
                this.hide();
            }
        }
        else {
            this.shouldShow = val;
        }
    }
    constructor(directiveView, componentFactoryResolver, renderer, directiveElement) {
        this.directiveView = directiveView;
        this.componentFactoryResolver = componentFactoryResolver;
        this.renderer = renderer;
        this.directiveElement = directiveElement;
        this.shouldShow = false;
        /**
         * Spinner status color
         * `basic`, `primary`, `info`, `success`, `warning`, `danger`, `control`.
         */
        this.spinnerStatus = 'basic';
        /**
         * Spinner size. Possible values: `tiny`, `small`, `medium` (default), `large`, `giant`
         */
        this.spinnerSize = 'medium';
        this.isSpinnerExist = false;
    }
    ngOnInit() {
        this.componentFactory = this.componentFactoryResolver.resolveComponentFactory(NbSpinnerComponent);
        if (this.shouldShow) {
            this.show();
        }
    }
    hide() {
        if (this.isSpinnerExist) {
            this.directiveView.remove();
            this.isSpinnerExist = false;
        }
    }
    show() {
        if (!this.isSpinnerExist) {
            this.spinner = this.directiveView.createComponent(this.componentFactory);
            this.setInstanceInputs(this.spinner.instance);
            this.spinner.changeDetectorRef.detectChanges();
            this.renderer.appendChild(this.directiveElement.nativeElement, this.spinner.location.nativeElement);
            this.isSpinnerExist = true;
        }
    }
    setInstanceInputs(instance) {
        instance.message = this.spinnerMessage;
        typeof this.spinnerStatus !== 'undefined' && (instance.status = this.spinnerStatus);
        typeof this.spinnerSize !== 'undefined' && (instance.size = this.spinnerSize);
    }
}
NbSpinnerDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.4", ngImport: i0, type: NbSpinnerDirective, deps: [{ token: i0.ViewContainerRef }, { token: i0.ComponentFactoryResolver }, { token: i0.Renderer2 }, { token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Directive });
NbSpinnerDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "14.0.0", version: "15.2.4", type: NbSpinnerDirective, selector: "[nbSpinner]", inputs: { spinnerMessage: ["nbSpinnerMessage", "spinnerMessage"], spinnerStatus: ["nbSpinnerStatus", "spinnerStatus"], spinnerSize: ["nbSpinnerSize", "spinnerSize"], nbSpinner: "nbSpinner" }, host: { properties: { "class.nb-spinner-container": "this.isSpinnerExist" } }, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.4", ngImport: i0, type: NbSpinnerDirective, decorators: [{
            type: Directive,
            args: [{ selector: '[nbSpinner]' }]
        }], ctorParameters: function () { return [{ type: i0.ViewContainerRef }, { type: i0.ComponentFactoryResolver }, { type: i0.Renderer2 }, { type: i0.ElementRef }]; }, propDecorators: { spinnerMessage: [{
                type: Input,
                args: ['nbSpinnerMessage']
            }], spinnerStatus: [{
                type: Input,
                args: ['nbSpinnerStatus']
            }], spinnerSize: [{
                type: Input,
                args: ['nbSpinnerSize']
            }], nbSpinner: [{
                type: Input,
                args: ['nbSpinner']
            }], isSpinnerExist: [{
                type: HostBinding,
                args: ['class.nb-spinner-container']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3Bpbm5lci5kaXJlY3RpdmUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL3RoZW1lL2NvbXBvbmVudHMvc3Bpbm5lci9zcGlubmVyLmRpcmVjdGl2ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHO0FBRUgsT0FBTyxFQUlMLFNBQVMsRUFFVCxLQUFLLEVBSUwsV0FBVyxHQUNaLE1BQU0sZUFBZSxDQUFDO0FBSXZCLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHFCQUFxQixDQUFDOztBQUV6RDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBdUNHO0FBRUgsTUFBTSxPQUFPLGtCQUFrQjtJQXVCN0I7OztPQUdHO0lBQ0gsSUFDSSxTQUFTLENBQUMsR0FBWTtRQUN4QixJQUFJLElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtZQUN6QixJQUFJLEdBQUcsRUFBRTtnQkFDUCxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7YUFDYjtpQkFBTTtnQkFDTCxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7YUFDYjtTQUNGO2FBQU07WUFDTCxJQUFJLENBQUMsVUFBVSxHQUFHLEdBQUcsQ0FBQztTQUN2QjtJQUNILENBQUM7SUFJRCxZQUFvQixhQUErQixFQUMvQix3QkFBa0QsRUFDbEQsUUFBbUIsRUFDbkIsZ0JBQTRCO1FBSDVCLGtCQUFhLEdBQWIsYUFBYSxDQUFrQjtRQUMvQiw2QkFBd0IsR0FBeEIsd0JBQXdCLENBQTBCO1FBQ2xELGFBQVEsR0FBUixRQUFRLENBQVc7UUFDbkIscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFZO1FBM0N4QyxlQUFVLEdBQUcsS0FBSyxDQUFDO1FBVTNCOzs7V0FHRztRQUN1QixrQkFBYSxHQUE4QixPQUFPLENBQUM7UUFFN0U7O1dBRUc7UUFDcUIsZ0JBQVcsR0FBb0IsUUFBUSxDQUFDO1FBbUJyQixtQkFBYyxHQUFHLEtBQUssQ0FBQztJQU1sRSxDQUFDO0lBRUQsUUFBUTtRQUNOLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsd0JBQXdCLENBQUMsdUJBQXVCLENBQUMsa0JBQWtCLENBQUMsQ0FBQztRQUNsRyxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDbkIsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1NBQ2I7SUFDSCxDQUFDO0lBRUQsSUFBSTtRQUNGLElBQUksSUFBSSxDQUFDLGNBQWMsRUFBRTtZQUN2QixJQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQzVCLElBQUksQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFDO1NBQzdCO0lBQ0gsQ0FBQztJQUVELElBQUk7UUFDRixJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsRUFBRTtZQUN4QixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsZUFBZSxDQUFxQixJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztZQUM3RixJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUM5QyxJQUFJLENBQUMsT0FBTyxDQUFDLGlCQUFpQixDQUFDLGFBQWEsRUFBRSxDQUFDO1lBQy9DLElBQUksQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDcEcsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUM7U0FDNUI7SUFDSCxDQUFDO0lBRUQsaUJBQWlCLENBQUMsUUFBNEI7UUFDNUMsUUFBUSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFBO1FBQ3RDLE9BQU8sSUFBSSxDQUFDLGFBQWEsS0FBSyxXQUFXLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUNwRixPQUFPLElBQUksQ0FBQyxXQUFXLEtBQUssV0FBVyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDaEYsQ0FBQzs7K0dBNUVVLGtCQUFrQjttR0FBbEIsa0JBQWtCOzJGQUFsQixrQkFBa0I7a0JBRDlCLFNBQVM7bUJBQUMsRUFBQyxRQUFRLEVBQUUsYUFBYSxFQUFDOytMQVdQLGNBQWM7c0JBQXhDLEtBQUs7dUJBQUMsa0JBQWtCO2dCQU1DLGFBQWE7c0JBQXRDLEtBQUs7dUJBQUMsaUJBQWlCO2dCQUtBLFdBQVc7c0JBQWxDLEtBQUs7dUJBQUMsZUFBZTtnQkFPbEIsU0FBUztzQkFEWixLQUFLO3VCQUFDLFdBQVc7Z0JBYXlCLGNBQWM7c0JBQXhELFdBQVc7dUJBQUMsNEJBQTRCIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuXG5pbXBvcnQge1xuICBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXG4gIENvbXBvbmVudEZhY3RvcnksXG4gIENvbXBvbmVudFJlZixcbiAgRGlyZWN0aXZlLFxuICBFbGVtZW50UmVmLFxuICBJbnB1dCxcbiAgT25Jbml0LFxuICBSZW5kZXJlcjIsXG4gIFZpZXdDb250YWluZXJSZWYsXG4gIEhvc3RCaW5kaW5nLFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgTmJDb21wb25lbnRTaXplIH0gZnJvbSAnLi4vY29tcG9uZW50LXNpemUnO1xuaW1wb3J0IHsgTmJDb21wb25lbnRPckN1c3RvbVN0YXR1cyB9IGZyb20gJy4uL2NvbXBvbmVudC1zdGF0dXMnO1xuaW1wb3J0IHsgTmJTcGlubmVyQ29tcG9uZW50IH0gZnJvbSAnLi9zcGlubmVyLmNvbXBvbmVudCc7XG5cbi8qKlxuICogU3R5bGVkIHNwaW5uZXIgZGlyZWN0aXZlXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTcGlubmVyIFNob3djYXNlLCBzcGlubmVyL3NwaW5uZXItY2FyZC5jb21wb25lbnQpXG4gKlxuICpcbiAqIGBgYHRzXG4gKiA8bmItY2FyZCBbbmJTcGlubmVyXT1cImxvYWRpbmdcIiBuYlNwaW5uZXJTdGF0dXM9XCJkYW5nZXJcIj5cbiAqICAgPG5iLWNhcmQtYm9keT5DYXJkIENvbnRlbnQ8L25iLWNhcmQtYm9keT5cbiAqIDwvbmItY2FyZD5cbiAqIGBgYFxuICpcbiAqICMjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBJbXBvcnQgYE5iU3Bpbm5lck1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJTcGlubmVyTW9kdWxlLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBQYWdlTW9kdWxlIHsgfVxuICogYGBgXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBDb3VsZCBiZSBjb2xvcmVkIHVzaW5nIGBzdGF0dXNgIHByb3BlcnR5XG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTcGlubmVyIENvbG9ycywgc3Bpbm5lci9zcGlubmVyLWNvbG9ycy5jb21wb25lbnQpXG4gKlxuICogQXZhaWxhYmxlIGluIGRpZmZlcmVudCBzaXplcyB3aXRoIGBzaXplYCBwcm9wZXJ0eTpcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFNwaW5uZXIgU2l6ZXMsIHNwaW5uZXIvc3Bpbm5lci1zaXplcy5jb21wb25lbnQpXG4gKlxuICogSXQgaXMgYWxzbyBwb3NzaWJsZSB0byBwbGFjZSBpdCBpbnRvIHRoZSBidXR0b246XG4gKiBAc3RhY2tlZC1leGFtcGxlKEJ1dHRvbnMgd2l0aCBzcGlubmVyLCBzcGlubmVyL3NwaW5uZXItYnV0dG9uLmNvbXBvbmVudClcbiAqXG4gKiBPciB0YWJzOlxuICogQHN0YWNrZWQtZXhhbXBsZShTcGlubmVyIGluIHRhYnMsIHNwaW5uZXIvc3Bpbm5lci10YWJzLmNvbXBvbmVudClcbiAqL1xuQERpcmVjdGl2ZSh7c2VsZWN0b3I6ICdbbmJTcGlubmVyXSd9KVxuZXhwb3J0IGNsYXNzIE5iU3Bpbm5lckRpcmVjdGl2ZSBpbXBsZW1lbnRzIE9uSW5pdCB7XG5cbiAgcHJpdmF0ZSBzaG91bGRTaG93ID0gZmFsc2U7XG4gIHNwaW5uZXI6IENvbXBvbmVudFJlZjxOYlNwaW5uZXJDb21wb25lbnQ+O1xuICBjb21wb25lbnRGYWN0b3J5OiBDb21wb25lbnRGYWN0b3J5PE5iU3Bpbm5lckNvbXBvbmVudD47XG5cbiAgLyoqXG4gICAqIFNwaW5uZXIgbWVzc2FnZSBzaG93biBuZXh0IHRvIHRoZSBpY29uXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBASW5wdXQoJ25iU3Bpbm5lck1lc3NhZ2UnKSBzcGlubmVyTWVzc2FnZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBTcGlubmVyIHN0YXR1cyBjb2xvclxuICAgKiBgYmFzaWNgLCBgcHJpbWFyeWAsIGBpbmZvYCwgYHN1Y2Nlc3NgLCBgd2FybmluZ2AsIGBkYW5nZXJgLCBgY29udHJvbGAuXG4gICAqL1xuICBASW5wdXQoJ25iU3Bpbm5lclN0YXR1cycpIHNwaW5uZXJTdGF0dXM6IE5iQ29tcG9uZW50T3JDdXN0b21TdGF0dXMgPSAnYmFzaWMnO1xuXG4gIC8qKlxuICAgKiBTcGlubmVyIHNpemUuIFBvc3NpYmxlIHZhbHVlczogYHRpbnlgLCBgc21hbGxgLCBgbWVkaXVtYCAoZGVmYXVsdCksIGBsYXJnZWAsIGBnaWFudGBcbiAgICovXG4gIEBJbnB1dCgnbmJTcGlubmVyU2l6ZScpIHNwaW5uZXJTaXplOiBOYkNvbXBvbmVudFNpemUgPSAnbWVkaXVtJztcblxuICAvKipcbiAgICogRGlyZWN0aXZlIHZhbHVlIC0gc2hvdyBvciBoaWRlIHNwaW5uZXJcbiAgICogQHBhcmFtIHtib29sZWFufSB2YWxcbiAgICovXG4gIEBJbnB1dCgnbmJTcGlubmVyJylcbiAgc2V0IG5iU3Bpbm5lcih2YWw6IGJvb2xlYW4pIHtcbiAgICBpZiAodGhpcy5jb21wb25lbnRGYWN0b3J5KSB7XG4gICAgICBpZiAodmFsKSB7XG4gICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2hvdWxkU2hvdyA9IHZhbDtcbiAgICB9XG4gIH1cblxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLm5iLXNwaW5uZXItY29udGFpbmVyJykgaXNTcGlubmVyRXhpc3QgPSBmYWxzZTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGRpcmVjdGl2ZVZpZXc6IFZpZXdDb250YWluZXJSZWYsXG4gICAgICAgICAgICAgIHByaXZhdGUgY29tcG9uZW50RmFjdG9yeVJlc29sdmVyOiBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXG4gICAgICAgICAgICAgIHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMixcbiAgICAgICAgICAgICAgcHJpdmF0ZSBkaXJlY3RpdmVFbGVtZW50OiBFbGVtZW50UmVmKSB7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLmNvbXBvbmVudEZhY3RvcnkgPSB0aGlzLmNvbXBvbmVudEZhY3RvcnlSZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShOYlNwaW5uZXJDb21wb25lbnQpO1xuICAgIGlmICh0aGlzLnNob3VsZFNob3cpIHtcbiAgICAgIHRoaXMuc2hvdygpO1xuICAgIH1cbiAgfVxuXG4gIGhpZGUoKSB7XG4gICAgaWYgKHRoaXMuaXNTcGlubmVyRXhpc3QpIHtcbiAgICAgIHRoaXMuZGlyZWN0aXZlVmlldy5yZW1vdmUoKTtcbiAgICAgIHRoaXMuaXNTcGlubmVyRXhpc3QgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBzaG93KCkge1xuICAgIGlmICghdGhpcy5pc1NwaW5uZXJFeGlzdCkge1xuICAgICAgdGhpcy5zcGlubmVyID0gdGhpcy5kaXJlY3RpdmVWaWV3LmNyZWF0ZUNvbXBvbmVudDxOYlNwaW5uZXJDb21wb25lbnQ+KHRoaXMuY29tcG9uZW50RmFjdG9yeSk7XG4gICAgICB0aGlzLnNldEluc3RhbmNlSW5wdXRzKHRoaXMuc3Bpbm5lci5pbnN0YW5jZSk7XG4gICAgICB0aGlzLnNwaW5uZXIuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgdGhpcy5yZW5kZXJlci5hcHBlbmRDaGlsZCh0aGlzLmRpcmVjdGl2ZUVsZW1lbnQubmF0aXZlRWxlbWVudCwgdGhpcy5zcGlubmVyLmxvY2F0aW9uLm5hdGl2ZUVsZW1lbnQpO1xuICAgICAgdGhpcy5pc1NwaW5uZXJFeGlzdCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgc2V0SW5zdGFuY2VJbnB1dHMoaW5zdGFuY2U6IE5iU3Bpbm5lckNvbXBvbmVudCkge1xuICAgIGluc3RhbmNlLm1lc3NhZ2UgPSB0aGlzLnNwaW5uZXJNZXNzYWdlXG4gICAgdHlwZW9mIHRoaXMuc3Bpbm5lclN0YXR1cyAhPT0gJ3VuZGVmaW5lZCcgJiYgKGluc3RhbmNlLnN0YXR1cyA9IHRoaXMuc3Bpbm5lclN0YXR1cyk7XG4gICAgdHlwZW9mIHRoaXMuc3Bpbm5lclNpemUgIT09ICd1bmRlZmluZWQnICYmIChpbnN0YW5jZS5zaXplID0gdGhpcy5zcGlubmVyU2l6ZSk7XG4gIH1cbn1cbiJdfQ==