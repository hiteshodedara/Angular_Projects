/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
import { Component, Input, HostBinding, ViewChild, ContentChildren, ContentChild, } from '@angular/core';
import { convertToBoolProperty } from '../helpers';
import { NbChatFormComponent } from './chat-form.component';
import { NbChatMessageComponent } from './chat-message.component';
import { NbChatCustomMessageService } from './chat-custom-message.service';
import { NbChatTitleDirective } from './chat-title.directive';
import * as i0 from "@angular/core";
import * as i1 from "../../services/status.service";
import * as i2 from "@angular/common";
/**
 * Conversational UI collection - a set of components for chat-like UI construction.
 *
 * Main features:
 * - different message types support (text, image, file, file group, map, etc)
 * - drag & drop for images and files with preview
 * - different UI styles
 * - custom action buttons (coming soon)
 *
 * Here's a complete example build in a bot-like app. Type `help` to be able to receive different message types.
 * Enjoy the conversation and the beautiful UI.
 * @stacked-example(Showcase, chat/chat-showcase.component)
 *
 * Basic chat configuration and usage:
 * ```ts
 * <nb-chat title="Nebular Conversational UI">
 *       <nb-chat-message *ngFor="let msg of messages"
 *                        [type]="msg.type"
 *                        [message]="msg.text"
 *                        [reply]="msg.reply"
 *                        [sender]="msg.user.name"
 *                        [date]="msg.date"
 *                        [files]="msg.files"
 *                        [quote]="msg.quote"
 *                        [latitude]="msg.latitude"
 *                        [longitude]="msg.longitude"
 *                        [avatar]="msg.user.avatar">
 *   </nb-chat-message>
 *
 *   <nb-chat-form (send)="sendMessage($event)" [dropFiles]="true">
 *   </nb-chat-form>
 * </nb-chat>
 * ```
 * ### Installation
 *
 * Import `NbChatModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbChatModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 *
 * If you need to provide an API key for a `map` message type (which is required by Google Maps)
 * you may use `NbChatModule.forRoot({ ... })` call if this is a global app configuration
 * or `NbChatModule.forChild({ ... })` for a feature module configuration:
 *
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbChatModule.forRoot({ messageGoogleMapKey: 'MAP_KEY' }),
 *   ],
 * })
 * export class AppModule { }
 * ```
 *
 * ### Usage
 *
 * There are three main components:
 * ```ts
 * <nb-chat>
 * </nb-chat> // chat container
 *
 * <nb-chat-form>
 * </nb-chat-form> // chat form with drag&drop files feature
 *
 * <nb-chat-message>
 * </nb-chat-message> // chat message, available multiple types
 * ```
 *
 * You could provide a title template via the `nbChatTitle` directive. It overrides `title` input.
 * @stacked-example(Custom template as a title, chat/chat-template-title.component)
 *
 * Two users conversation showcase:
 * @stacked-example(Conversation, chat/chat-conversation-showcase.component)
 *
 * Chat UI is also available in different colors by specifying a `[status]` input:
 *
 * @stacked-example(Colored Chat, chat/chat-colors.component)
 *
 * Also it is possible to configure sizes through `[size]` input:
 *
 * @stacked-example(Chat Sizes, chat/chat-sizes.component)
 *
 * # Custom message types
 *
 * Besides built-in message types, you could provide custom ones with their own template to render.
 * As an example, let's add the `link` message type.
 * <br>
 * First, you need to provide a template for the `link` message type:
 * ```html
 * <nb-chat>
 *   <a *nbCustomMessage="'link'" href="https://example.com">example.com</a>
 * </nb-chat>
 * ```
 * Then, add the `nb-chat-message` component with the `link` type:
 * ```html
 * <nb-chat>
 *   <a *nbCustomMessage="'link'" href="https://example.com">example.com</a>
 *   <nb-chat-message type="link"></nb-chat-message>
 * </nb-chat>
 * ```
 *
 * <div class="note note-warning">
 *   <div class="note-title">Important!</div>
 *   <div class="note-body">
 *     Custom chat messages must be defined before the `nb-chat-message`.
 *   </div>
 * </div>
 *
 * Custom message templates could have arbitrary data associated with them. Let's extract hardcoded link
 * href and text. To pass some data to the custom message template, use the `customMessageData` input
 * of the `nb-chat-message` component:
 * ```html
 * ...
 * <nb-chat-message type="link" [customMessageData]="{ href: 'https://example.com', text: 'example.com' }">
 * </nb-chat-message>
 * ...
 * ```
 * When `customMessageData` is set, this object would become a template context and you'll be able
 * to reference it via `let varName` syntax:
 * ```html
 * <a *nbCustomMessage="'link'; let data" [href]="data.href">{{ data.text }}</a>
 * ```
 *
 * That's it, full example will look like this:
 * ```html
 * <nb-chat title="Nebular Conversational UI">
 *   <a *nbCustomMessage="'link'; let data" [href]="data.href">{{ data.text }}</a>
 *   <nb-chat-message type="link" [customMessageData]="{ href: 'https://example.com', text: 'example.com' }">
 *   </nb-chat-message>
 * </nb-chat>
 * ```
 *
 * If you want to style your custom template from the ground up you could turn off generic message styling
 * (such as round borders, color, background, etc.) via the `noStyles` input:
 * ```html
 *   <div *nbCustomMessage="'my-custom-type'; noStyles: true">...</div>
 * ```
 * When you decide to use your own styles, the `isReply` property of the custom message template context
 * would come in handy. This property allows you to determine whether the message is a reply or not.
 * For example, to change link text color (as replies have a different background):
 * ```html
 * <a *nbCustomMessage="'link'; let data; let isReply=isReply"
 *    [href]="data.href"
 *    [class.link-control]="!isReply">
 *   {{ data.label }}
 * </a>
 * ```
 *
 * Below, you could find a more complex example with multiple custom message types:
 * @stacked-example(Custom message, chat/chat-custom-message.component)
 *
 * @styles
 *
 * chat-background-color:
 * chat-border:
 * chat-border-radius:
 * chat-shadow:
 * chat-padding:
 * chat-scrollbar-color:
 * chat-scrollbar-background-color:
 * chat-scrollbar-width:
 * chat-text-color:
 * chat-text-font-family:
 * chat-text-font-size:
 * chat-text-font-weight:
 * chat-text-line-height:
 * chat-header-text-font-family:
 * chat-header-text-font-size:
 * chat-header-text-font-weight:
 * chat-header-text-line-height:
 * chat-tiny-height:
 * chat-small-height:
 * chat-medium-height:
 * chat-large-height:
 * chat-giant-height:
 * chat-basic-background-color:
 * chat-basic-text-color:
 * chat-primary-background-color:
 * chat-primary-text-color:
 * chat-success-background-color:
 * chat-success-text-color:
 * chat-info-background-color:
 * chat-info-text-color:
 * chat-warning-background-color:
 * chat-warning-text-color:
 * chat-danger-background-color:
 * chat-danger-text-color:
 * chat-control-background-color:
 * chat-control-text-color:
 * chat-divider-color:
 * chat-divider-style:
 * chat-divider-width:
 * chat-message-background:
 * chat-message-text-color:
 * chat-message-reply-background-color:
 * chat-message-reply-text-color:
 * chat-message-avatar-background-color:
 * chat-message-sender-text-color:
 * chat-message-quote-background-color:
 * chat-message-quote-text-color:
 * chat-message-file-text-color:
 * chat-message-file-background-color:
 */
export class NbChatComponent {
    /**
     * Scroll chat to the bottom of the list when a new message arrives
     */
    get scrollBottom() {
        return this._scrollBottom;
    }
    set scrollBottom(value) {
        this._scrollBottom = convertToBoolProperty(value);
    }
    constructor(statusService) {
        this.statusService = statusService;
        /**
         * Chat status color (adds specific styles):
         * `basic` (default), `primary`, `success`, `info`, `warning`, `danger`, `control`.
         */
        this.status = 'basic';
        this.noMessagesPlaceholder = 'No messages yet.';
        this._scrollBottom = true;
    }
    ngOnChanges(changes) {
        if ('status' in changes) {
            this.updateFormStatus();
        }
    }
    ngAfterContentInit() {
        this.updateFormStatus();
    }
    ngAfterViewInit() {
        this.messages.changes.subscribe((messages) => {
            this.messages = messages;
            this.updateView();
        });
        this.updateView();
    }
    updateView() {
        if (this.scrollBottom) {
            this.scrollListBottom();
        }
    }
    scrollListBottom() {
        this.scrollable.nativeElement.scrollTop = this.scrollable.nativeElement.scrollHeight;
    }
    updateFormStatus() {
        if (this.chatForm) {
            this.chatForm.setStatus(this.status);
        }
    }
    get tiny() {
        return this.size === 'tiny';
    }
    get small() {
        return this.size === 'small';
    }
    get medium() {
        return this.size === 'medium';
    }
    get large() {
        return this.size === 'large';
    }
    get giant() {
        return this.size === 'giant';
    }
    get primary() {
        return this.status === 'primary';
    }
    get success() {
        return this.status === 'success';
    }
    get info() {
        return this.status === 'info';
    }
    get warning() {
        return this.status === 'warning';
    }
    get danger() {
        return this.status === 'danger';
    }
    get basic() {
        return this.status === 'basic';
    }
    get control() {
        return this.status === 'control';
    }
    get additionalClasses() {
        if (this.statusService.isCustomStatus(this.status)) {
            return [this.statusService.getStatusClass(this.status)];
        }
        return [];
    }
}
NbChatComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.4", ngImport: i0, type: NbChatComponent, deps: [{ token: i1.NbStatusService }], target: i0.ɵɵFactoryTarget.Component });
NbChatComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.4", type: NbChatComponent, selector: "nb-chat", inputs: { title: "title", size: "size", status: "status", noMessagesPlaceholder: "noMessagesPlaceholder", scrollBottom: "scrollBottom" }, host: { properties: { "class.size-tiny": "this.tiny", "class.size-small": "this.small", "class.size-medium": "this.medium", "class.size-large": "this.large", "class.size-giant": "this.giant", "class.status-primary": "this.primary", "class.status-success": "this.success", "class.status-info": "this.info", "class.status-warning": "this.warning", "class.status-danger": "this.danger", "class.status-basic": "this.basic", "class.status-control": "this.control", "class": "this.additionalClasses" } }, providers: [NbChatCustomMessageService], queries: [{ propertyName: "chatForm", first: true, predicate: NbChatFormComponent, descendants: true }, { propertyName: "titleTemplate", first: true, predicate: NbChatTitleDirective, descendants: true }, { propertyName: "messages", predicate: NbChatMessageComponent }], viewQueries: [{ propertyName: "scrollable", first: true, predicate: ["scrollable"], descendants: true }], usesOnChanges: true, ngImport: i0, template: `
    <div class="header">
      <ng-container
        *ngIf="titleTemplate; else textTitleTemplate"
        [ngTemplateOutlet]="titleTemplate.templateRef"
        [ngTemplateOutletContext]="{ $implicit: titleTemplate.context }"
      >
      </ng-container>
      <ng-template #textTitleTemplate>
        {{ title }}
      </ng-template>
    </div>

    <div class="scrollable" #scrollable>
      <div class="messages">
        <ng-content select="nb-chat-message"></ng-content>
        <p class="no-messages" *ngIf="!messages?.length">{{ noMessagesPlaceholder }}</p>
      </div>
    </div>
    <div class="form">
      <ng-content select="nb-chat-form"></ng-content>
    </div>
  `, isInline: true, styles: ["/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */:host{display:flex;flex-direction:column;position:relative;height:100%}\n"], dependencies: [{ kind: "directive", type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i2.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.4", ngImport: i0, type: NbChatComponent, decorators: [{
            type: Component,
            args: [{ selector: 'nb-chat', template: `
    <div class="header">
      <ng-container
        *ngIf="titleTemplate; else textTitleTemplate"
        [ngTemplateOutlet]="titleTemplate.templateRef"
        [ngTemplateOutletContext]="{ $implicit: titleTemplate.context }"
      >
      </ng-container>
      <ng-template #textTitleTemplate>
        {{ title }}
      </ng-template>
    </div>

    <div class="scrollable" #scrollable>
      <div class="messages">
        <ng-content select="nb-chat-message"></ng-content>
        <p class="no-messages" *ngIf="!messages?.length">{{ noMessagesPlaceholder }}</p>
      </div>
    </div>
    <div class="form">
      <ng-content select="nb-chat-form"></ng-content>
    </div>
  `, providers: [NbChatCustomMessageService], styles: ["/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */:host{display:flex;flex-direction:column;position:relative;height:100%}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.NbStatusService }]; }, propDecorators: { title: [{
                type: Input
            }], size: [{
                type: Input
            }], status: [{
                type: Input
            }], noMessagesPlaceholder: [{
                type: Input
            }], scrollBottom: [{
                type: Input
            }], scrollable: [{
                type: ViewChild,
                args: ['scrollable']
            }], messages: [{
                type: ContentChildren,
                args: [NbChatMessageComponent]
            }], chatForm: [{
                type: ContentChild,
                args: [NbChatFormComponent]
            }], titleTemplate: [{
                type: ContentChild,
                args: [NbChatTitleDirective]
            }], tiny: [{
                type: HostBinding,
                args: ['class.size-tiny']
            }], small: [{
                type: HostBinding,
                args: ['class.size-small']
            }], medium: [{
                type: HostBinding,
                args: ['class.size-medium']
            }], large: [{
                type: HostBinding,
                args: ['class.size-large']
            }], giant: [{
                type: HostBinding,
                args: ['class.size-giant']
            }], primary: [{
                type: HostBinding,
                args: ['class.status-primary']
            }], success: [{
                type: HostBinding,
                args: ['class.status-success']
            }], info: [{
                type: HostBinding,
                args: ['class.status-info']
            }], warning: [{
                type: HostBinding,
                args: ['class.status-warning']
            }], danger: [{
                type: HostBinding,
                args: ['class.status-danger']
            }], basic: [{
                type: HostBinding,
                args: ['class.status-basic']
            }], control: [{
                type: HostBinding,
                args: ['class.status-control']
            }], additionalClasses: [{
                type: HostBinding,
                args: ['class']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hhdC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL3RoZW1lL2NvbXBvbmVudHMvY2hhdC9jaGF0LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHO0FBRUgsT0FBTyxFQUNMLFNBQVMsRUFDVCxLQUFLLEVBQ0wsV0FBVyxFQUNYLFNBQVMsRUFFVCxlQUFlLEVBR2YsWUFBWSxHQUliLE1BQU0sZUFBZSxDQUFDO0FBS3ZCLE9BQU8sRUFBRSxxQkFBcUIsRUFBa0IsTUFBTSxZQUFZLENBQUM7QUFDbkUsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDNUQsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDbEUsT0FBTyxFQUFFLDBCQUEwQixFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFDM0UsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sd0JBQXdCLENBQUM7Ozs7QUFFOUQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FnTkc7QUE2QkgsTUFBTSxPQUFPLGVBQWU7SUFpQjFCOztPQUVHO0lBQ0gsSUFDSSxZQUFZO1FBQ2QsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDO0lBQzVCLENBQUM7SUFDRCxJQUFJLFlBQVksQ0FBQyxLQUFjO1FBQzdCLElBQUksQ0FBQyxhQUFhLEdBQUcscUJBQXFCLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDcEQsQ0FBQztJQVNELFlBQXNCLGFBQThCO1FBQTlCLGtCQUFhLEdBQWIsYUFBYSxDQUFpQjtRQTFCcEQ7OztXQUdHO1FBQ00sV0FBTSxHQUE4QixPQUFPLENBQUM7UUFFNUMsMEJBQXFCLEdBQVcsa0JBQWtCLENBQUM7UUFZbEQsa0JBQWEsR0FBWSxJQUFJLENBQUM7SUFRZSxDQUFDO0lBRXhELFdBQVcsQ0FBQyxPQUFzQjtRQUNoQyxJQUFJLFFBQVEsSUFBSSxPQUFPLEVBQUU7WUFDdkIsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7U0FDekI7SUFDSCxDQUFDO0lBRUQsa0JBQWtCO1FBQ2hCLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0lBQzFCLENBQUM7SUFFRCxlQUFlO1FBQ2IsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUU7WUFDM0MsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7WUFDekIsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ3BCLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO0lBQ3BCLENBQUM7SUFFRCxVQUFVO1FBQ1IsSUFBSSxJQUFJLENBQUMsWUFBWSxFQUFFO1lBQ3JCLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1NBQ3pCO0lBQ0gsQ0FBQztJQUVELGdCQUFnQjtRQUNkLElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUM7SUFDdkYsQ0FBQztJQUVTLGdCQUFnQjtRQUN4QixJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDakIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQ3RDO0lBQ0gsQ0FBQztJQUVELElBQ0ksSUFBSTtRQUNOLE9BQU8sSUFBSSxDQUFDLElBQUksS0FBSyxNQUFNLENBQUM7SUFDOUIsQ0FBQztJQUVELElBQ0ksS0FBSztRQUNQLE9BQU8sSUFBSSxDQUFDLElBQUksS0FBSyxPQUFPLENBQUM7SUFDL0IsQ0FBQztJQUVELElBQ0ksTUFBTTtRQUNSLE9BQU8sSUFBSSxDQUFDLElBQUksS0FBSyxRQUFRLENBQUM7SUFDaEMsQ0FBQztJQUVELElBQ0ksS0FBSztRQUNQLE9BQU8sSUFBSSxDQUFDLElBQUksS0FBSyxPQUFPLENBQUM7SUFDL0IsQ0FBQztJQUVELElBQ0ksS0FBSztRQUNQLE9BQU8sSUFBSSxDQUFDLElBQUksS0FBSyxPQUFPLENBQUM7SUFDL0IsQ0FBQztJQUVELElBQ0ksT0FBTztRQUNULE9BQU8sSUFBSSxDQUFDLE1BQU0sS0FBSyxTQUFTLENBQUM7SUFDbkMsQ0FBQztJQUVELElBQ0ksT0FBTztRQUNULE9BQU8sSUFBSSxDQUFDLE1BQU0sS0FBSyxTQUFTLENBQUM7SUFDbkMsQ0FBQztJQUVELElBQ0ksSUFBSTtRQUNOLE9BQU8sSUFBSSxDQUFDLE1BQU0sS0FBSyxNQUFNLENBQUM7SUFDaEMsQ0FBQztJQUVELElBQ0ksT0FBTztRQUNULE9BQU8sSUFBSSxDQUFDLE1BQU0sS0FBSyxTQUFTLENBQUM7SUFDbkMsQ0FBQztJQUVELElBQ0ksTUFBTTtRQUNSLE9BQU8sSUFBSSxDQUFDLE1BQU0sS0FBSyxRQUFRLENBQUM7SUFDbEMsQ0FBQztJQUVELElBQ0ksS0FBSztRQUNQLE9BQU8sSUFBSSxDQUFDLE1BQU0sS0FBSyxPQUFPLENBQUM7SUFDakMsQ0FBQztJQUVELElBQ0ksT0FBTztRQUNULE9BQU8sSUFBSSxDQUFDLE1BQU0sS0FBSyxTQUFTLENBQUM7SUFDbkMsQ0FBQztJQUVELElBQ0ksaUJBQWlCO1FBQ25CLElBQUksSUFBSSxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQ2xELE9BQU8sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztTQUN6RDtRQUNELE9BQU8sRUFBRSxDQUFDO0lBQ1osQ0FBQzs7NEdBMUlVLGVBQWU7Z0dBQWYsZUFBZSwrcEJBRmYsQ0FBQywwQkFBMEIsQ0FBQyxnRUFrQ3pCLG1CQUFtQixnRkFDbkIsb0JBQW9CLDhEQUZqQixzQkFBc0IsNEpBeEQ3Qjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQXNCVDsyRkFHVSxlQUFlO2tCQTVCM0IsU0FBUzsrQkFDRSxTQUFTLFlBRVQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FzQlQsYUFDVSxDQUFDLDBCQUEwQixDQUFDO3NHQUc5QixLQUFLO3NCQUFiLEtBQUs7Z0JBTUcsSUFBSTtzQkFBWixLQUFLO2dCQU1HLE1BQU07c0JBQWQsS0FBSztnQkFFRyxxQkFBcUI7c0JBQTdCLEtBQUs7Z0JBTUYsWUFBWTtzQkFEZixLQUFLO2dCQVVtQixVQUFVO3NCQUFsQyxTQUFTO3VCQUFDLFlBQVk7Z0JBQ2tCLFFBQVE7c0JBQWhELGVBQWU7dUJBQUMsc0JBQXNCO2dCQUNKLFFBQVE7c0JBQTFDLFlBQVk7dUJBQUMsbUJBQW1CO2dCQUNHLGFBQWE7c0JBQWhELFlBQVk7dUJBQUMsb0JBQW9CO2dCQXdDOUIsSUFBSTtzQkFEUCxXQUFXO3VCQUFDLGlCQUFpQjtnQkFNMUIsS0FBSztzQkFEUixXQUFXO3VCQUFDLGtCQUFrQjtnQkFNM0IsTUFBTTtzQkFEVCxXQUFXO3VCQUFDLG1CQUFtQjtnQkFNNUIsS0FBSztzQkFEUixXQUFXO3VCQUFDLGtCQUFrQjtnQkFNM0IsS0FBSztzQkFEUixXQUFXO3VCQUFDLGtCQUFrQjtnQkFNM0IsT0FBTztzQkFEVixXQUFXO3VCQUFDLHNCQUFzQjtnQkFNL0IsT0FBTztzQkFEVixXQUFXO3VCQUFDLHNCQUFzQjtnQkFNL0IsSUFBSTtzQkFEUCxXQUFXO3VCQUFDLG1CQUFtQjtnQkFNNUIsT0FBTztzQkFEVixXQUFXO3VCQUFDLHNCQUFzQjtnQkFNL0IsTUFBTTtzQkFEVCxXQUFXO3VCQUFDLHFCQUFxQjtnQkFNOUIsS0FBSztzQkFEUixXQUFXO3VCQUFDLG9CQUFvQjtnQkFNN0IsT0FBTztzQkFEVixXQUFXO3VCQUFDLHNCQUFzQjtnQkFNL0IsaUJBQWlCO3NCQURwQixXQUFXO3VCQUFDLE9BQU8iLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5cbmltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgSW5wdXQsXG4gIEhvc3RCaW5kaW5nLFxuICBWaWV3Q2hpbGQsXG4gIEVsZW1lbnRSZWYsXG4gIENvbnRlbnRDaGlsZHJlbixcbiAgUXVlcnlMaXN0LFxuICBBZnRlclZpZXdJbml0LFxuICBDb250ZW50Q2hpbGQsXG4gIFNpbXBsZUNoYW5nZXMsXG4gIEFmdGVyQ29udGVudEluaXQsXG4gIE9uQ2hhbmdlcyxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IE5iU3RhdHVzU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3N0YXR1cy5zZXJ2aWNlJztcbmltcG9ydCB7IE5iQ29tcG9uZW50U2l6ZSB9IGZyb20gJy4uL2NvbXBvbmVudC1zaXplJztcbmltcG9ydCB7IE5iQ29tcG9uZW50T3JDdXN0b21TdGF0dXMgfSBmcm9tICcuLi9jb21wb25lbnQtc3RhdHVzJztcbmltcG9ydCB7IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSwgTmJCb29sZWFuSW5wdXQgfSBmcm9tICcuLi9oZWxwZXJzJztcbmltcG9ydCB7IE5iQ2hhdEZvcm1Db21wb25lbnQgfSBmcm9tICcuL2NoYXQtZm9ybS5jb21wb25lbnQnO1xuaW1wb3J0IHsgTmJDaGF0TWVzc2FnZUNvbXBvbmVudCB9IGZyb20gJy4vY2hhdC1tZXNzYWdlLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBOYkNoYXRDdXN0b21NZXNzYWdlU2VydmljZSB9IGZyb20gJy4vY2hhdC1jdXN0b20tbWVzc2FnZS5zZXJ2aWNlJztcbmltcG9ydCB7IE5iQ2hhdFRpdGxlRGlyZWN0aXZlIH0gZnJvbSAnLi9jaGF0LXRpdGxlLmRpcmVjdGl2ZSc7XG5cbi8qKlxuICogQ29udmVyc2F0aW9uYWwgVUkgY29sbGVjdGlvbiAtIGEgc2V0IG9mIGNvbXBvbmVudHMgZm9yIGNoYXQtbGlrZSBVSSBjb25zdHJ1Y3Rpb24uXG4gKlxuICogTWFpbiBmZWF0dXJlczpcbiAqIC0gZGlmZmVyZW50IG1lc3NhZ2UgdHlwZXMgc3VwcG9ydCAodGV4dCwgaW1hZ2UsIGZpbGUsIGZpbGUgZ3JvdXAsIG1hcCwgZXRjKVxuICogLSBkcmFnICYgZHJvcCBmb3IgaW1hZ2VzIGFuZCBmaWxlcyB3aXRoIHByZXZpZXdcbiAqIC0gZGlmZmVyZW50IFVJIHN0eWxlc1xuICogLSBjdXN0b20gYWN0aW9uIGJ1dHRvbnMgKGNvbWluZyBzb29uKVxuICpcbiAqIEhlcmUncyBhIGNvbXBsZXRlIGV4YW1wbGUgYnVpbGQgaW4gYSBib3QtbGlrZSBhcHAuIFR5cGUgYGhlbHBgIHRvIGJlIGFibGUgdG8gcmVjZWl2ZSBkaWZmZXJlbnQgbWVzc2FnZSB0eXBlcy5cbiAqIEVuam95IHRoZSBjb252ZXJzYXRpb24gYW5kIHRoZSBiZWF1dGlmdWwgVUkuXG4gKiBAc3RhY2tlZC1leGFtcGxlKFNob3djYXNlLCBjaGF0L2NoYXQtc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIEJhc2ljIGNoYXQgY29uZmlndXJhdGlvbiBhbmQgdXNhZ2U6XG4gKiBgYGB0c1xuICogPG5iLWNoYXQgdGl0bGU9XCJOZWJ1bGFyIENvbnZlcnNhdGlvbmFsIFVJXCI+XG4gKiAgICAgICA8bmItY2hhdC1tZXNzYWdlICpuZ0Zvcj1cImxldCBtc2cgb2YgbWVzc2FnZXNcIlxuICogICAgICAgICAgICAgICAgICAgICAgICBbdHlwZV09XCJtc2cudHlwZVwiXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIFttZXNzYWdlXT1cIm1zZy50ZXh0XCJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgW3JlcGx5XT1cIm1zZy5yZXBseVwiXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIFtzZW5kZXJdPVwibXNnLnVzZXIubmFtZVwiXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIFtkYXRlXT1cIm1zZy5kYXRlXCJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgW2ZpbGVzXT1cIm1zZy5maWxlc1wiXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIFtxdW90ZV09XCJtc2cucXVvdGVcIlxuICogICAgICAgICAgICAgICAgICAgICAgICBbbGF0aXR1ZGVdPVwibXNnLmxhdGl0dWRlXCJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgW2xvbmdpdHVkZV09XCJtc2cubG9uZ2l0dWRlXCJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgW2F2YXRhcl09XCJtc2cudXNlci5hdmF0YXJcIj5cbiAqICAgPC9uYi1jaGF0LW1lc3NhZ2U+XG4gKlxuICogICA8bmItY2hhdC1mb3JtIChzZW5kKT1cInNlbmRNZXNzYWdlKCRldmVudClcIiBbZHJvcEZpbGVzXT1cInRydWVcIj5cbiAqICAgPC9uYi1jaGF0LWZvcm0+XG4gKiA8L25iLWNoYXQ+XG4gKiBgYGBcbiAqICMjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBJbXBvcnQgYE5iQ2hhdE1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJDaGF0TW9kdWxlLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBQYWdlTW9kdWxlIHsgfVxuICogYGBgXG4gKlxuICogSWYgeW91IG5lZWQgdG8gcHJvdmlkZSBhbiBBUEkga2V5IGZvciBhIGBtYXBgIG1lc3NhZ2UgdHlwZSAod2hpY2ggaXMgcmVxdWlyZWQgYnkgR29vZ2xlIE1hcHMpXG4gKiB5b3UgbWF5IHVzZSBgTmJDaGF0TW9kdWxlLmZvclJvb3QoeyAuLi4gfSlgIGNhbGwgaWYgdGhpcyBpcyBhIGdsb2JhbCBhcHAgY29uZmlndXJhdGlvblxuICogb3IgYE5iQ2hhdE1vZHVsZS5mb3JDaGlsZCh7IC4uLiB9KWAgZm9yIGEgZmVhdHVyZSBtb2R1bGUgY29uZmlndXJhdGlvbjpcbiAqXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iQ2hhdE1vZHVsZS5mb3JSb290KHsgbWVzc2FnZUdvb2dsZU1hcEtleTogJ01BUF9LRVknIH0pLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBBcHBNb2R1bGUgeyB9XG4gKiBgYGBcbiAqXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBUaGVyZSBhcmUgdGhyZWUgbWFpbiBjb21wb25lbnRzOlxuICogYGBgdHNcbiAqIDxuYi1jaGF0PlxuICogPC9uYi1jaGF0PiAvLyBjaGF0IGNvbnRhaW5lclxuICpcbiAqIDxuYi1jaGF0LWZvcm0+XG4gKiA8L25iLWNoYXQtZm9ybT4gLy8gY2hhdCBmb3JtIHdpdGggZHJhZyZkcm9wIGZpbGVzIGZlYXR1cmVcbiAqXG4gKiA8bmItY2hhdC1tZXNzYWdlPlxuICogPC9uYi1jaGF0LW1lc3NhZ2U+IC8vIGNoYXQgbWVzc2FnZSwgYXZhaWxhYmxlIG11bHRpcGxlIHR5cGVzXG4gKiBgYGBcbiAqXG4gKiBZb3UgY291bGQgcHJvdmlkZSBhIHRpdGxlIHRlbXBsYXRlIHZpYSB0aGUgYG5iQ2hhdFRpdGxlYCBkaXJlY3RpdmUuIEl0IG92ZXJyaWRlcyBgdGl0bGVgIGlucHV0LlxuICogQHN0YWNrZWQtZXhhbXBsZShDdXN0b20gdGVtcGxhdGUgYXMgYSB0aXRsZSwgY2hhdC9jaGF0LXRlbXBsYXRlLXRpdGxlLmNvbXBvbmVudClcbiAqXG4gKiBUd28gdXNlcnMgY29udmVyc2F0aW9uIHNob3djYXNlOlxuICogQHN0YWNrZWQtZXhhbXBsZShDb252ZXJzYXRpb24sIGNoYXQvY2hhdC1jb252ZXJzYXRpb24tc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIENoYXQgVUkgaXMgYWxzbyBhdmFpbGFibGUgaW4gZGlmZmVyZW50IGNvbG9ycyBieSBzcGVjaWZ5aW5nIGEgYFtzdGF0dXNdYCBpbnB1dDpcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKENvbG9yZWQgQ2hhdCwgY2hhdC9jaGF0LWNvbG9ycy5jb21wb25lbnQpXG4gKlxuICogQWxzbyBpdCBpcyBwb3NzaWJsZSB0byBjb25maWd1cmUgc2l6ZXMgdGhyb3VnaCBgW3NpemVdYCBpbnB1dDpcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKENoYXQgU2l6ZXMsIGNoYXQvY2hhdC1zaXplcy5jb21wb25lbnQpXG4gKlxuICogIyBDdXN0b20gbWVzc2FnZSB0eXBlc1xuICpcbiAqIEJlc2lkZXMgYnVpbHQtaW4gbWVzc2FnZSB0eXBlcywgeW91IGNvdWxkIHByb3ZpZGUgY3VzdG9tIG9uZXMgd2l0aCB0aGVpciBvd24gdGVtcGxhdGUgdG8gcmVuZGVyLlxuICogQXMgYW4gZXhhbXBsZSwgbGV0J3MgYWRkIHRoZSBgbGlua2AgbWVzc2FnZSB0eXBlLlxuICogPGJyPlxuICogRmlyc3QsIHlvdSBuZWVkIHRvIHByb3ZpZGUgYSB0ZW1wbGF0ZSBmb3IgdGhlIGBsaW5rYCBtZXNzYWdlIHR5cGU6XG4gKiBgYGBodG1sXG4gKiA8bmItY2hhdD5cbiAqICAgPGEgKm5iQ3VzdG9tTWVzc2FnZT1cIidsaW5rJ1wiIGhyZWY9XCJodHRwczovL2V4YW1wbGUuY29tXCI+ZXhhbXBsZS5jb208L2E+XG4gKiA8L25iLWNoYXQ+XG4gKiBgYGBcbiAqIFRoZW4sIGFkZCB0aGUgYG5iLWNoYXQtbWVzc2FnZWAgY29tcG9uZW50IHdpdGggdGhlIGBsaW5rYCB0eXBlOlxuICogYGBgaHRtbFxuICogPG5iLWNoYXQ+XG4gKiAgIDxhICpuYkN1c3RvbU1lc3NhZ2U9XCInbGluaydcIiBocmVmPVwiaHR0cHM6Ly9leGFtcGxlLmNvbVwiPmV4YW1wbGUuY29tPC9hPlxuICogICA8bmItY2hhdC1tZXNzYWdlIHR5cGU9XCJsaW5rXCI+PC9uYi1jaGF0LW1lc3NhZ2U+XG4gKiA8L25iLWNoYXQ+XG4gKiBgYGBcbiAqXG4gKiA8ZGl2IGNsYXNzPVwibm90ZSBub3RlLXdhcm5pbmdcIj5cbiAqICAgPGRpdiBjbGFzcz1cIm5vdGUtdGl0bGVcIj5JbXBvcnRhbnQhPC9kaXY+XG4gKiAgIDxkaXYgY2xhc3M9XCJub3RlLWJvZHlcIj5cbiAqICAgICBDdXN0b20gY2hhdCBtZXNzYWdlcyBtdXN0IGJlIGRlZmluZWQgYmVmb3JlIHRoZSBgbmItY2hhdC1tZXNzYWdlYC5cbiAqICAgPC9kaXY+XG4gKiA8L2Rpdj5cbiAqXG4gKiBDdXN0b20gbWVzc2FnZSB0ZW1wbGF0ZXMgY291bGQgaGF2ZSBhcmJpdHJhcnkgZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhlbS4gTGV0J3MgZXh0cmFjdCBoYXJkY29kZWQgbGlua1xuICogaHJlZiBhbmQgdGV4dC4gVG8gcGFzcyBzb21lIGRhdGEgdG8gdGhlIGN1c3RvbSBtZXNzYWdlIHRlbXBsYXRlLCB1c2UgdGhlIGBjdXN0b21NZXNzYWdlRGF0YWAgaW5wdXRcbiAqIG9mIHRoZSBgbmItY2hhdC1tZXNzYWdlYCBjb21wb25lbnQ6XG4gKiBgYGBodG1sXG4gKiAuLi5cbiAqIDxuYi1jaGF0LW1lc3NhZ2UgdHlwZT1cImxpbmtcIiBbY3VzdG9tTWVzc2FnZURhdGFdPVwieyBocmVmOiAnaHR0cHM6Ly9leGFtcGxlLmNvbScsIHRleHQ6ICdleGFtcGxlLmNvbScgfVwiPlxuICogPC9uYi1jaGF0LW1lc3NhZ2U+XG4gKiAuLi5cbiAqIGBgYFxuICogV2hlbiBgY3VzdG9tTWVzc2FnZURhdGFgIGlzIHNldCwgdGhpcyBvYmplY3Qgd291bGQgYmVjb21lIGEgdGVtcGxhdGUgY29udGV4dCBhbmQgeW91J2xsIGJlIGFibGVcbiAqIHRvIHJlZmVyZW5jZSBpdCB2aWEgYGxldCB2YXJOYW1lYCBzeW50YXg6XG4gKiBgYGBodG1sXG4gKiA8YSAqbmJDdXN0b21NZXNzYWdlPVwiJ2xpbmsnOyBsZXQgZGF0YVwiIFtocmVmXT1cImRhdGEuaHJlZlwiPnt7IGRhdGEudGV4dCB9fTwvYT5cbiAqIGBgYFxuICpcbiAqIFRoYXQncyBpdCwgZnVsbCBleGFtcGxlIHdpbGwgbG9vayBsaWtlIHRoaXM6XG4gKiBgYGBodG1sXG4gKiA8bmItY2hhdCB0aXRsZT1cIk5lYnVsYXIgQ29udmVyc2F0aW9uYWwgVUlcIj5cbiAqICAgPGEgKm5iQ3VzdG9tTWVzc2FnZT1cIidsaW5rJzsgbGV0IGRhdGFcIiBbaHJlZl09XCJkYXRhLmhyZWZcIj57eyBkYXRhLnRleHQgfX08L2E+XG4gKiAgIDxuYi1jaGF0LW1lc3NhZ2UgdHlwZT1cImxpbmtcIiBbY3VzdG9tTWVzc2FnZURhdGFdPVwieyBocmVmOiAnaHR0cHM6Ly9leGFtcGxlLmNvbScsIHRleHQ6ICdleGFtcGxlLmNvbScgfVwiPlxuICogICA8L25iLWNoYXQtbWVzc2FnZT5cbiAqIDwvbmItY2hhdD5cbiAqIGBgYFxuICpcbiAqIElmIHlvdSB3YW50IHRvIHN0eWxlIHlvdXIgY3VzdG9tIHRlbXBsYXRlIGZyb20gdGhlIGdyb3VuZCB1cCB5b3UgY291bGQgdHVybiBvZmYgZ2VuZXJpYyBtZXNzYWdlIHN0eWxpbmdcbiAqIChzdWNoIGFzIHJvdW5kIGJvcmRlcnMsIGNvbG9yLCBiYWNrZ3JvdW5kLCBldGMuKSB2aWEgdGhlIGBub1N0eWxlc2AgaW5wdXQ6XG4gKiBgYGBodG1sXG4gKiAgIDxkaXYgKm5iQ3VzdG9tTWVzc2FnZT1cIidteS1jdXN0b20tdHlwZSc7IG5vU3R5bGVzOiB0cnVlXCI+Li4uPC9kaXY+XG4gKiBgYGBcbiAqIFdoZW4geW91IGRlY2lkZSB0byB1c2UgeW91ciBvd24gc3R5bGVzLCB0aGUgYGlzUmVwbHlgIHByb3BlcnR5IG9mIHRoZSBjdXN0b20gbWVzc2FnZSB0ZW1wbGF0ZSBjb250ZXh0XG4gKiB3b3VsZCBjb21lIGluIGhhbmR5LiBUaGlzIHByb3BlcnR5IGFsbG93cyB5b3UgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIG1lc3NhZ2UgaXMgYSByZXBseSBvciBub3QuXG4gKiBGb3IgZXhhbXBsZSwgdG8gY2hhbmdlIGxpbmsgdGV4dCBjb2xvciAoYXMgcmVwbGllcyBoYXZlIGEgZGlmZmVyZW50IGJhY2tncm91bmQpOlxuICogYGBgaHRtbFxuICogPGEgKm5iQ3VzdG9tTWVzc2FnZT1cIidsaW5rJzsgbGV0IGRhdGE7IGxldCBpc1JlcGx5PWlzUmVwbHlcIlxuICogICAgW2hyZWZdPVwiZGF0YS5ocmVmXCJcbiAqICAgIFtjbGFzcy5saW5rLWNvbnRyb2xdPVwiIWlzUmVwbHlcIj5cbiAqICAge3sgZGF0YS5sYWJlbCB9fVxuICogPC9hPlxuICogYGBgXG4gKlxuICogQmVsb3csIHlvdSBjb3VsZCBmaW5kIGEgbW9yZSBjb21wbGV4IGV4YW1wbGUgd2l0aCBtdWx0aXBsZSBjdXN0b20gbWVzc2FnZSB0eXBlczpcbiAqIEBzdGFja2VkLWV4YW1wbGUoQ3VzdG9tIG1lc3NhZ2UsIGNoYXQvY2hhdC1jdXN0b20tbWVzc2FnZS5jb21wb25lbnQpXG4gKlxuICogQHN0eWxlc1xuICpcbiAqIGNoYXQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoYXQtYm9yZGVyOlxuICogY2hhdC1ib3JkZXItcmFkaXVzOlxuICogY2hhdC1zaGFkb3c6XG4gKiBjaGF0LXBhZGRpbmc6XG4gKiBjaGF0LXNjcm9sbGJhci1jb2xvcjpcbiAqIGNoYXQtc2Nyb2xsYmFyLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGF0LXNjcm9sbGJhci13aWR0aDpcbiAqIGNoYXQtdGV4dC1jb2xvcjpcbiAqIGNoYXQtdGV4dC1mb250LWZhbWlseTpcbiAqIGNoYXQtdGV4dC1mb250LXNpemU6XG4gKiBjaGF0LXRleHQtZm9udC13ZWlnaHQ6XG4gKiBjaGF0LXRleHQtbGluZS1oZWlnaHQ6XG4gKiBjaGF0LWhlYWRlci10ZXh0LWZvbnQtZmFtaWx5OlxuICogY2hhdC1oZWFkZXItdGV4dC1mb250LXNpemU6XG4gKiBjaGF0LWhlYWRlci10ZXh0LWZvbnQtd2VpZ2h0OlxuICogY2hhdC1oZWFkZXItdGV4dC1saW5lLWhlaWdodDpcbiAqIGNoYXQtdGlueS1oZWlnaHQ6XG4gKiBjaGF0LXNtYWxsLWhlaWdodDpcbiAqIGNoYXQtbWVkaXVtLWhlaWdodDpcbiAqIGNoYXQtbGFyZ2UtaGVpZ2h0OlxuICogY2hhdC1naWFudC1oZWlnaHQ6XG4gKiBjaGF0LWJhc2ljLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGF0LWJhc2ljLXRleHQtY29sb3I6XG4gKiBjaGF0LXByaW1hcnktYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoYXQtcHJpbWFyeS10ZXh0LWNvbG9yOlxuICogY2hhdC1zdWNjZXNzLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGF0LXN1Y2Nlc3MtdGV4dC1jb2xvcjpcbiAqIGNoYXQtaW5mby1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hhdC1pbmZvLXRleHQtY29sb3I6XG4gKiBjaGF0LXdhcm5pbmctYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoYXQtd2FybmluZy10ZXh0LWNvbG9yOlxuICogY2hhdC1kYW5nZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoYXQtZGFuZ2VyLXRleHQtY29sb3I6XG4gKiBjaGF0LWNvbnRyb2wtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoYXQtY29udHJvbC10ZXh0LWNvbG9yOlxuICogY2hhdC1kaXZpZGVyLWNvbG9yOlxuICogY2hhdC1kaXZpZGVyLXN0eWxlOlxuICogY2hhdC1kaXZpZGVyLXdpZHRoOlxuICogY2hhdC1tZXNzYWdlLWJhY2tncm91bmQ6XG4gKiBjaGF0LW1lc3NhZ2UtdGV4dC1jb2xvcjpcbiAqIGNoYXQtbWVzc2FnZS1yZXBseS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hhdC1tZXNzYWdlLXJlcGx5LXRleHQtY29sb3I6XG4gKiBjaGF0LW1lc3NhZ2UtYXZhdGFyLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGF0LW1lc3NhZ2Utc2VuZGVyLXRleHQtY29sb3I6XG4gKiBjaGF0LW1lc3NhZ2UtcXVvdGUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoYXQtbWVzc2FnZS1xdW90ZS10ZXh0LWNvbG9yOlxuICogY2hhdC1tZXNzYWdlLWZpbGUtdGV4dC1jb2xvcjpcbiAqIGNoYXQtbWVzc2FnZS1maWxlLWJhY2tncm91bmQtY29sb3I6XG4gKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ25iLWNoYXQnLFxuICBzdHlsZVVybHM6IFsnLi9jaGF0LmNvbXBvbmVudC5zY3NzJ10sXG4gIHRlbXBsYXRlOiBgXG4gICAgPGRpdiBjbGFzcz1cImhlYWRlclwiPlxuICAgICAgPG5nLWNvbnRhaW5lclxuICAgICAgICAqbmdJZj1cInRpdGxlVGVtcGxhdGU7IGVsc2UgdGV4dFRpdGxlVGVtcGxhdGVcIlxuICAgICAgICBbbmdUZW1wbGF0ZU91dGxldF09XCJ0aXRsZVRlbXBsYXRlLnRlbXBsYXRlUmVmXCJcbiAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRDb250ZXh0XT1cInsgJGltcGxpY2l0OiB0aXRsZVRlbXBsYXRlLmNvbnRleHQgfVwiXG4gICAgICA+XG4gICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgIDxuZy10ZW1wbGF0ZSAjdGV4dFRpdGxlVGVtcGxhdGU+XG4gICAgICAgIHt7IHRpdGxlIH19XG4gICAgICA8L25nLXRlbXBsYXRlPlxuICAgIDwvZGl2PlxuXG4gICAgPGRpdiBjbGFzcz1cInNjcm9sbGFibGVcIiAjc2Nyb2xsYWJsZT5cbiAgICAgIDxkaXYgY2xhc3M9XCJtZXNzYWdlc1wiPlxuICAgICAgICA8bmctY29udGVudCBzZWxlY3Q9XCJuYi1jaGF0LW1lc3NhZ2VcIj48L25nLWNvbnRlbnQ+XG4gICAgICAgIDxwIGNsYXNzPVwibm8tbWVzc2FnZXNcIiAqbmdJZj1cIiFtZXNzYWdlcz8ubGVuZ3RoXCI+e3sgbm9NZXNzYWdlc1BsYWNlaG9sZGVyIH19PC9wPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cImZvcm1cIj5cbiAgICAgIDxuZy1jb250ZW50IHNlbGVjdD1cIm5iLWNoYXQtZm9ybVwiPjwvbmctY29udGVudD5cbiAgICA8L2Rpdj5cbiAgYCxcbiAgcHJvdmlkZXJzOiBbTmJDaGF0Q3VzdG9tTWVzc2FnZVNlcnZpY2VdLFxufSlcbmV4cG9ydCBjbGFzcyBOYkNoYXRDb21wb25lbnQgaW1wbGVtZW50cyBPbkNoYW5nZXMsIEFmdGVyQ29udGVudEluaXQsIEFmdGVyVmlld0luaXQge1xuICBASW5wdXQoKSB0aXRsZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBDaGF0IHNpemUsIGF2YWlsYWJsZSBzaXplczpcbiAgICogYHRpbnlgLCBgc21hbGxgLCBgbWVkaXVtYCwgYGxhcmdlYCwgYGdpYW50YFxuICAgKi9cbiAgQElucHV0KCkgc2l6ZTogTmJDb21wb25lbnRTaXplO1xuXG4gIC8qKlxuICAgKiBDaGF0IHN0YXR1cyBjb2xvciAoYWRkcyBzcGVjaWZpYyBzdHlsZXMpOlxuICAgKiBgYmFzaWNgIChkZWZhdWx0KSwgYHByaW1hcnlgLCBgc3VjY2Vzc2AsIGBpbmZvYCwgYHdhcm5pbmdgLCBgZGFuZ2VyYCwgYGNvbnRyb2xgLlxuICAgKi9cbiAgQElucHV0KCkgc3RhdHVzOiBOYkNvbXBvbmVudE9yQ3VzdG9tU3RhdHVzID0gJ2Jhc2ljJztcblxuICBASW5wdXQoKSBub01lc3NhZ2VzUGxhY2Vob2xkZXI6IHN0cmluZyA9ICdObyBtZXNzYWdlcyB5ZXQuJztcblxuICAvKipcbiAgICogU2Nyb2xsIGNoYXQgdG8gdGhlIGJvdHRvbSBvZiB0aGUgbGlzdCB3aGVuIGEgbmV3IG1lc3NhZ2UgYXJyaXZlc1xuICAgKi9cbiAgQElucHV0KClcbiAgZ2V0IHNjcm9sbEJvdHRvbSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fc2Nyb2xsQm90dG9tO1xuICB9XG4gIHNldCBzY3JvbGxCb3R0b20odmFsdWU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9zY3JvbGxCb3R0b20gPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICB9XG4gIHByb3RlY3RlZCBfc2Nyb2xsQm90dG9tOiBib29sZWFuID0gdHJ1ZTtcbiAgc3RhdGljIG5nQWNjZXB0SW5wdXRUeXBlX3Njcm9sbEJvdHRvbTogTmJCb29sZWFuSW5wdXQ7XG5cbiAgQFZpZXdDaGlsZCgnc2Nyb2xsYWJsZScpIHNjcm9sbGFibGU6IEVsZW1lbnRSZWY7XG4gIEBDb250ZW50Q2hpbGRyZW4oTmJDaGF0TWVzc2FnZUNvbXBvbmVudCkgbWVzc2FnZXM6IFF1ZXJ5TGlzdDxOYkNoYXRNZXNzYWdlQ29tcG9uZW50PjtcbiAgQENvbnRlbnRDaGlsZChOYkNoYXRGb3JtQ29tcG9uZW50KSBjaGF0Rm9ybTogTmJDaGF0Rm9ybUNvbXBvbmVudDtcbiAgQENvbnRlbnRDaGlsZChOYkNoYXRUaXRsZURpcmVjdGl2ZSkgdGl0bGVUZW1wbGF0ZTogTmJDaGF0VGl0bGVEaXJlY3RpdmU7XG5cbiAgY29uc3RydWN0b3IocHJvdGVjdGVkIHN0YXR1c1NlcnZpY2U6IE5iU3RhdHVzU2VydmljZSkge31cblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XG4gICAgaWYgKCdzdGF0dXMnIGluIGNoYW5nZXMpIHtcbiAgICAgIHRoaXMudXBkYXRlRm9ybVN0YXR1cygpO1xuICAgIH1cbiAgfVxuXG4gIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcbiAgICB0aGlzLnVwZGF0ZUZvcm1TdGF0dXMoKTtcbiAgfVxuXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICB0aGlzLm1lc3NhZ2VzLmNoYW5nZXMuc3Vic2NyaWJlKChtZXNzYWdlcykgPT4ge1xuICAgICAgdGhpcy5tZXNzYWdlcyA9IG1lc3NhZ2VzO1xuICAgICAgdGhpcy51cGRhdGVWaWV3KCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnVwZGF0ZVZpZXcoKTtcbiAgfVxuXG4gIHVwZGF0ZVZpZXcoKSB7XG4gICAgaWYgKHRoaXMuc2Nyb2xsQm90dG9tKSB7XG4gICAgICB0aGlzLnNjcm9sbExpc3RCb3R0b20oKTtcbiAgICB9XG4gIH1cblxuICBzY3JvbGxMaXN0Qm90dG9tKCkge1xuICAgIHRoaXMuc2Nyb2xsYWJsZS5uYXRpdmVFbGVtZW50LnNjcm9sbFRvcCA9IHRoaXMuc2Nyb2xsYWJsZS5uYXRpdmVFbGVtZW50LnNjcm9sbEhlaWdodDtcbiAgfVxuXG4gIHByb3RlY3RlZCB1cGRhdGVGb3JtU3RhdHVzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNoYXRGb3JtKSB7XG4gICAgICB0aGlzLmNoYXRGb3JtLnNldFN0YXR1cyh0aGlzLnN0YXR1cyk7XG4gICAgfVxuICB9XG5cbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLXRpbnknKVxuICBnZXQgdGlueSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5zaXplID09PSAndGlueSc7XG4gIH1cblxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtc21hbGwnKVxuICBnZXQgc21hbGwoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ3NtYWxsJztcbiAgfVxuXG4gIEBIb3N0QmluZGluZygnY2xhc3Muc2l6ZS1tZWRpdW0nKVxuICBnZXQgbWVkaXVtKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdtZWRpdW0nO1xuICB9XG5cbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLWxhcmdlJylcbiAgZ2V0IGxhcmdlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdsYXJnZSc7XG4gIH1cblxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtZ2lhbnQnKVxuICBnZXQgZ2lhbnQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ2dpYW50JztcbiAgfVxuXG4gIEBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLXByaW1hcnknKVxuICBnZXQgcHJpbWFyeSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdwcmltYXJ5JztcbiAgfVxuXG4gIEBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLXN1Y2Nlc3MnKVxuICBnZXQgc3VjY2VzcygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdzdWNjZXNzJztcbiAgfVxuXG4gIEBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLWluZm8nKVxuICBnZXQgaW5mbygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdpbmZvJztcbiAgfVxuXG4gIEBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLXdhcm5pbmcnKVxuICBnZXQgd2FybmluZygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICd3YXJuaW5nJztcbiAgfVxuXG4gIEBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLWRhbmdlcicpXG4gIGdldCBkYW5nZXIoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnZGFuZ2VyJztcbiAgfVxuXG4gIEBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLWJhc2ljJylcbiAgZ2V0IGJhc2ljKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2Jhc2ljJztcbiAgfVxuXG4gIEBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLWNvbnRyb2wnKVxuICBnZXQgY29udHJvbCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdjb250cm9sJztcbiAgfVxuXG4gIEBIb3N0QmluZGluZygnY2xhc3MnKVxuICBnZXQgYWRkaXRpb25hbENsYXNzZXMoKTogc3RyaW5nW10ge1xuICAgIGlmICh0aGlzLnN0YXR1c1NlcnZpY2UuaXNDdXN0b21TdGF0dXModGhpcy5zdGF0dXMpKSB7XG4gICAgICByZXR1cm4gW3RoaXMuc3RhdHVzU2VydmljZS5nZXRTdGF0dXNDbGFzcyh0aGlzLnN0YXR1cyldO1xuICAgIH1cbiAgICByZXR1cm4gW107XG4gIH1cbn1cbiJdfQ==